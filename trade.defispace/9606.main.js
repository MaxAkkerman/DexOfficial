(self.webpackChunkmy_swap=self.webpackChunkmy_swap||[]).push([[9606],{80884:(r,t,e)=>{"use strict";var n=e(23944),i=e(49604);function o(r){var t=r;if("string"!=typeof t)throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function f(r){return"0x"+r.toString(16)}r.exports={arrayContainsArray:function(r,t,e){if(!0!==Array.isArray(r))throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof r+"'");if(!0!==Array.isArray(t))throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[Boolean(e)?"some":"every"]((function(t){return r.indexOf(t)>=0}))},intToBuffer:function(r){var t=f(r);return new Buffer(o(t.slice(2)),"hex")},getBinarySize:function(r){if("string"!=typeof r)throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof r+"'.");return Buffer.byteLength(r,"utf8")},isHexPrefixed:n,stripHexPrefix:i,padToEven:o,intToHex:f,fromAscii:function(r){for(var t="",e=0;e<r.length;e++){var n=r.charCodeAt(e).toString(16);t+=n.length<2?"0"+n:n}return"0x"+t},fromUtf8:function(r){return"0x"+o(new Buffer(r,"utf8").toString("hex")).replace(/^0+|0+$/g,"")},toAscii:function(r){var t="",e=0,n=r.length;for("0x"===r.substring(0,2)&&(e=2);e<n;e+=2){var i=parseInt(r.substr(e,2),16);t+=String.fromCharCode(i)}return t},toUtf8:function(r){return new Buffer(o(i(r).replace(/^0+|0+$/g,"")),"hex").toString("utf8")},getKeys:function(r,t,e){if(!Array.isArray(r))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof r+"'");if("string"!=typeof t)throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<r.length;i++){var o=r[i][t];if(e&&!o)o="";else if("string"!=typeof o)throw new Error("invalid abi");n.push(o)}return n},isHexString:function(r,t){return!("string"!=typeof r||!r.match(/^0x[0-9A-Fa-f]*$/)||t&&r.length!==2+2*t)}}},23944:r=>{r.exports=function(r){if("string"!=typeof r)throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof r+", while checking isHexPrefixed.");return"0x"===r.slice(0,2)}},67266:(r,t,e)=>{var n="undefined"!=typeof JSON?JSON:e(58418);r.exports=function(r,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var e=t.space||"";"number"==typeof e&&(e=Array(e+1).join(" "));var f,u="boolean"==typeof t.cycles&&t.cycles,a=t.replacer||function(r,t){return t},s=t.cmp&&(f=t.cmp,function(r){return function(t,e){var n={key:t,value:r[t]},i={key:e,value:r[e]};return f(n,i)}}),c=[];return function r(t,f,p,y){var l=e?"\n"+new Array(y+1).join(e):"",h=e?": ":":";if(p&&p.toJSON&&"function"==typeof p.toJSON&&(p=p.toJSON()),void 0!==(p=a.call(t,f,p))){if("object"!=typeof p||null===p)return n.stringify(p);if(i(p)){for(var g=[],v=0;v<p.length;v++){var b=r(p,v,p[v],y+1)||n.stringify(null);g.push(l+e+b)}return"["+g.join(",")+l+"]"}if(-1!==c.indexOf(p)){if(u)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(p);var x=o(p).sort(s&&s(p));for(g=[],v=0;v<x.length;v++){var w=r(p,f=x[v],p[f],y+1);if(w){var d=n.stringify(f)+h+w;g.push(l+e+d)}}return c.splice(c.indexOf(p),1),"{"+g.join(",")+l+"}"}}({"":r},"",r,0)};var i=Array.isArray||function(r){return"[object Array]"==={}.toString.call(r)},o=Object.keys||function(r){var t=Object.prototype.hasOwnProperty||function(){return!0},e=[];for(var n in r)t.call(r,n)&&e.push(n);return e}},58418:(r,t,e)=>{t.parse=e(51396),t.stringify=e(66177)},51396:r=>{var t,e,n,i,o={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},f=function(r){throw{name:"SyntaxError",message:r,at:t,text:n}},u=function(r){return r&&r!==e&&f("Expected '"+r+"' instead of '"+e+"'"),e=n.charAt(t),t+=1,e},a=function(){var r,t="";for("-"===e&&(t="-",u("-"));e>="0"&&e<="9";)t+=e,u();if("."===e)for(t+=".";u()&&e>="0"&&e<="9";)t+=e;if("e"===e||"E"===e)for(t+=e,u(),"-"!==e&&"+"!==e||(t+=e,u());e>="0"&&e<="9";)t+=e,u();if(r=+t,isFinite(r))return r;f("Bad number")},s=function(){var r,t,n,i="";if('"'===e)for(;u();){if('"'===e)return u(),i;if("\\"===e)if(u(),"u"===e){for(n=0,t=0;t<4&&(r=parseInt(u(),16),isFinite(r));t+=1)n=16*n+r;i+=String.fromCharCode(n)}else{if("string"!=typeof o[e])break;i+=o[e]}else i+=e}f("Bad string")},c=function(){for(;e&&e<=" ";)u()};i=function(){switch(c(),e){case"{":return function(){var r,t={};if("{"===e){if(u("{"),c(),"}"===e)return u("}"),t;for(;e;){if(r=s(),c(),u(":"),Object.hasOwnProperty.call(t,r)&&f('Duplicate key "'+r+'"'),t[r]=i(),c(),"}"===e)return u("}"),t;u(","),c()}}f("Bad object")}();case"[":return function(){var r=[];if("["===e){if(u("["),c(),"]"===e)return u("]"),r;for(;e;){if(r.push(i()),c(),"]"===e)return u("]"),r;u(","),c()}}f("Bad array")}();case'"':return s();case"-":return a();default:return e>="0"&&e<="9"?a():function(){switch(e){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}f("Unexpected '"+e+"'")}()}},r.exports=function(r,o){var u;return n=r,t=0,e=" ",u=i(),c(),e&&f("Syntax error"),"function"==typeof o?function r(t,e){var n,i,f=t[e];if(f&&"object"==typeof f)for(n in f)Object.prototype.hasOwnProperty.call(f,n)&&(void 0!==(i=r(f,n))?f[n]=i:delete f[n]);return o.call(t,e,f)}({"":u},""):u}},66177:r=>{var t,e,n,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function f(r){return i.lastIndex=0,i.test(r)?'"'+r.replace(i,(function(r){var t=o[r];return"string"==typeof t?t:"\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+r+'"'}function u(r,i){var o,a,s,c,p,y=t,l=i[r];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(r)),"function"==typeof n&&(l=n.call(i,r,l)),typeof l){case"string":return f(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(t+=e,p=[],"[object Array]"===Object.prototype.toString.apply(l)){for(c=l.length,o=0;o<c;o+=1)p[o]=u(o,l)||"null";return s=0===p.length?"[]":t?"[\n"+t+p.join(",\n"+t)+"\n"+y+"]":"["+p.join(",")+"]",t=y,s}if(n&&"object"==typeof n)for(c=n.length,o=0;o<c;o+=1)"string"==typeof(a=n[o])&&(s=u(a,l))&&p.push(f(a)+(t?": ":":")+s);else for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(s=u(a,l))&&p.push(f(a)+(t?": ":":")+s);return s=0===p.length?"{}":t?"{\n"+t+p.join(",\n"+t)+"\n"+y+"}":"{"+p.join(",")+"}",t=y,s}}r.exports=function(r,i,o){var f;if(t="",e="","number"==typeof o)for(f=0;f<o;f+=1)e+=" ";else"string"==typeof o&&(e=o);if(n=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw new Error("JSON.stringify");return u("",{"":r})}},80045:function(r){!function(t){"use strict";var e=function(r){setTimeout(r,0)};"undefined"!=typeof process&&process&&"function"==typeof process.nextTick&&(e=process.nextTick),r.exports=function(r){var t={capacity:r||1,current:0,queue:[],firstHere:!1,take:function(){if(!1===t.firstHere){t.current++,t.firstHere=!0;var r=1}else r=0;var e={n:1};"function"==typeof arguments[0]?e.task=arguments[0]:e.n=arguments[0],arguments.length>=2&&("function"==typeof arguments[1]?e.task=arguments[1]:e.n=arguments[1]);var n=e.task;if(e.task=function(){n(t.leave)},t.current+e.n-r>t.capacity)return 1===r&&(t.current--,t.firstHere=!1),t.queue.push(e);t.current+=e.n-r,e.task(t.leave),1===r&&(t.firstHere=!1)},leave:function(r){if(r=r||1,t.current-=r,t.queue.length){var n=t.queue[0];n.n+t.current>t.capacity||(t.queue.shift(),t.current+=n.n,e(n.task))}else if(t.current<0)throw new Error("leave called too many times.")},available:function(r){return r=r||1,t.current+r<=t.capacity}};return t}}()},49604:(r,t,e)=>{var n=e(23944);r.exports=function(r){return"string"!=typeof r?r:n(r)?r.slice(2):r}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1zd2FwLy4vbm9kZV9tb2R1bGVzL2V0aGpzLXV0aWwvbGliL2luZGV4LmpzIiwid2VicGFjazovL215LXN3YXAvLi9ub2RlX21vZHVsZXMvaXMtaGV4LXByZWZpeGVkL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly9teS1zd2FwLy4vbm9kZV9tb2R1bGVzL2pzb24tc3RhYmxlLXN0cmluZ2lmeS9pbmRleC5qcyIsIndlYnBhY2s6Ly9teS1zd2FwLy4vbm9kZV9tb2R1bGVzL2pzb25pZnkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbXktc3dhcC8uL25vZGVfbW9kdWxlcy9qc29uaWZ5L2xpYi9wYXJzZS5qcyIsIndlYnBhY2s6Ly9teS1zd2FwLy4vbm9kZV9tb2R1bGVzL2pzb25pZnkvbGliL3N0cmluZ2lmeS5qcyIsIndlYnBhY2s6Ly9teS1zd2FwLy4vbm9kZV9tb2R1bGVzL3NlbWFwaG9yZS9saWIvc2VtYXBob3JlLmpzIiwid2VicGFjazovL215LXN3YXAvLi9ub2RlX21vZHVsZXMvc3RyaXAtaGV4LXByZWZpeC9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsiaXNIZXhQcmVmaXhlZCIsInN0cmlwSGV4UHJlZml4IiwicGFkVG9FdmVuIiwidmFsdWUiLCJhIiwiRXJyb3IiLCJsZW5ndGgiLCJpbnRUb0hleCIsImkiLCJ0b1N0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiLCJhcnJheUNvbnRhaW5zQXJyYXkiLCJzdXBlcnNldCIsInN1YnNldCIsInNvbWUiLCJBcnJheSIsImlzQXJyYXkiLCJCb29sZWFuIiwiaW5kZXhPZiIsImludFRvQnVmZmVyIiwiaGV4IiwiQnVmZmVyIiwic2xpY2UiLCJnZXRCaW5hcnlTaXplIiwic3RyIiwiYnl0ZUxlbmd0aCIsImZyb21Bc2NpaSIsInN0cmluZ1ZhbHVlIiwibiIsImNoYXJDb2RlQXQiLCJmcm9tVXRmOCIsInJlcGxhY2UiLCJ0b0FzY2lpIiwibCIsInN1YnN0cmluZyIsImNvZGUiLCJwYXJzZUludCIsInN1YnN0ciIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInRvVXRmOCIsImdldEtleXMiLCJwYXJhbXMiLCJrZXkiLCJhbGxvd0VtcHR5IiwicmVzdWx0IiwicHVzaCIsImlzSGV4U3RyaW5nIiwibWF0Y2giLCJqc29uIiwiSlNPTiIsIm9iaiIsIm9wdHMiLCJjbXAiLCJzcGFjZSIsImpvaW4iLCJmIiwiY3ljbGVzIiwicmVwbGFjZXIiLCJub2RlIiwiYiIsImFvYmoiLCJib2JqIiwic2VlbiIsInN0cmluZ2lmeSIsInBhcmVudCIsImxldmVsIiwiaW5kZW50IiwiY29sb25TZXBhcmF0b3IiLCJ0b0pTT04iLCJ1bmRlZmluZWQiLCJjYWxsIiwib3V0IiwiaXRlbSIsIlR5cGVFcnJvciIsImtleXMiLCJvYmplY3RLZXlzIiwic29ydCIsImtleVZhbHVlIiwic3BsaWNlIiwieCIsIk9iamVjdCIsImhhcyIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicGFyc2UiLCJhdCIsImNoIiwidGV4dCIsImVzY2FwZWUiLCJyIiwidCIsImVycm9yIiwibSIsIm5hbWUiLCJtZXNzYWdlIiwibmV4dCIsImMiLCJjaGFyQXQiLCJudW1iZXIiLCJzdHJpbmciLCJpc0Zpbml0ZSIsInVmZmZmIiwid2hpdGUiLCJvYmplY3QiLCJhcnJheSIsIndvcmQiLCJzb3VyY2UiLCJyZXZpdmVyIiwid2FsayIsImhvbGRlciIsImsiLCJ2IiwiZ2FwIiwicmVwIiwiZXNjYXBhYmxlIiwibWV0YSIsInF1b3RlIiwibGFzdEluZGV4IiwidGVzdCIsInBhcnRpYWwiLCJtaW5kIiwiYXBwbHkiLCJnbG9iYWwiLCJuZXh0VGljayIsImZuIiwic2V0VGltZW91dCIsInByb2Nlc3MiLCJjYXBhY2l0eSIsInNlbWFwaG9yZSIsImN1cnJlbnQiLCJxdWV1ZSIsImZpcnN0SGVyZSIsInRha2UiLCJpc0ZpcnN0IiwiYXJndW1lbnRzIiwidGFzayIsImxlYXZlIiwic2hpZnQiLCJhdmFpbGFibGUiXSwibWFwcGluZ3MiOiJtR0FFQSxJ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QUs3QyxFQUFJcUcsRUFBVUMsUUFBVUQsRUFBVUQsV0FJM0NDLEVBQVVFLE1BQU1PLFFBQ2hCVCxFQUFVQyxTQUFXekQsRUFBSzdDLEVBRTFCZ0csRUFBU25ELEVBQUsrRCxZQWhCYixHQUFJUCxFQUFVQyxRQUFVLEVBQ3ZCLE1BQU0sSUFBSTlILE1BQU0saUNBa0JuQnVJLFVBQVcsU0FBUy9HLEdBRW5CLE9BREFBLEVBQUlBLEdBQUssRUFDRnFHLEVBQVVDLFFBQVV0RyxHQUFLcUcsRUFBVUQsV0FJNUMsT0FBT0MsR0FyRlAsSSxnQkNBRCxJQUFJbEksRUFBZ0IsRUFBUSxPQU81QlUsRUFBT0MsUUFBVSxTQUF3QmMsR0FDdkMsTUFBbUIsaUJBQVJBLEVBQ0ZBLEVBR0Z6QixFQUFjeUIsR0FBT0EsRUFBSUYsTUFBTSxHQUFLRSIsImZpbGUiOiI5NjA2Lm1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBpc0hleFByZWZpeGVkID0gcmVxdWlyZSgnaXMtaGV4LXByZWZpeGVkJyk7XG52YXIgc3RyaXBIZXhQcmVmaXggPSByZXF1aXJlKCdzdHJpcC1oZXgtcHJlZml4Jyk7XG5cbi8qKlxuICogUGFkcyBhIGBTdHJpbmdgIHRvIGhhdmUgYW4gZXZlbiBsZW5ndGhcbiAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfSBvdXRwdXRcbiAqL1xuZnVuY3Rpb24gcGFkVG9FdmVuKHZhbHVlKSB7XG4gIHZhciBhID0gdmFsdWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICBpZiAodHlwZW9mIGEgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbZXRoanMtdXRpbF0gd2hpbGUgcGFkZGluZyB0byBldmVuLCB2YWx1ZSBtdXN0IGJlIHN0cmluZywgaXMgY3VycmVudGx5ICcgKyB0eXBlb2YgYSArICcsIHdoaWxlIHBhZFRvRXZlbi4nKTtcbiAgfVxuXG4gIGlmIChhLmxlbmd0aCAlIDIpIHtcbiAgICBhID0gJzAnICsgYTtcbiAgfVxuXG4gIHJldHVybiBhO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgYE51bWJlcmAgaW50byBhIGhleCBgU3RyaW5nYFxuICogQHBhcmFtIHtOdW1iZXJ9IGlcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gaW50VG9IZXgoaSkge1xuICB2YXIgaGV4ID0gaS50b1N0cmluZygxNik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICByZXR1cm4gJzB4JyArIGhleDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBgTnVtYmVyYCB0byBhIGBCdWZmZXJgXG4gKiBAcGFyYW0ge051bWJlcn0gaVxuICogQHJldHVybiB7QnVmZmVyfVxuICovXG5mdW5jdGlvbiBpbnRUb0J1ZmZlcihpKSB7XG4gIHZhciBoZXggPSBpbnRUb0hleChpKTtcblxuICByZXR1cm4gbmV3IEJ1ZmZlcihwYWRUb0V2ZW4oaGV4LnNsaWNlKDIpKSwgJ2hleCcpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgYmluYXJ5IHNpemUgb2YgYSBzdHJpbmdcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuZnVuY3Rpb24gZ2V0QmluYXJ5U2l6ZShzdHIpIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbZXRoanMtdXRpbF0gd2hpbGUgZ2V0dGluZyBiaW5hcnkgc2l6ZSwgbWV0aG9kIGdldEJpbmFyeVNpemUgcmVxdWlyZXMgaW5wdXQgXFwnc3RyXFwnIHRvIGJlIHR5cGUgU3RyaW5nLCBnb3QgXFwnJyArIHR5cGVvZiBzdHIgKyAnXFwnLicpO1xuICB9XG5cbiAgcmV0dXJuIEJ1ZmZlci5ieXRlTGVuZ3RoKHN0ciwgJ3V0ZjgnKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIFRSVUUgaWYgdGhlIGZpcnN0IHNwZWNpZmllZCBhcnJheSBjb250YWlucyBhbGwgZWxlbWVudHNcbiAqIGZyb20gdGhlIHNlY29uZCBvbmUuIEZBTFNFIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2FycmF5fSBzdXBlcnNldFxuICogQHBhcmFtIHthcnJheX0gc3Vic2V0XG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGFycmF5Q29udGFpbnNBcnJheShzdXBlcnNldCwgc3Vic2V0LCBzb21lKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHN1cGVyc2V0KSAhPT0gdHJ1ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignW2V0aGpzLXV0aWxdIG1ldGhvZCBhcnJheUNvbnRhaW5zQXJyYXkgcmVxdWlyZXMgaW5wdXQgXFwnc3VwZXJzZXRcXCcgdG8gYmUgYW4gYXJyYXkgZ290IHR5cGUgXFwnJyArIHR5cGVvZiBzdXBlcnNldCArICdcXCcnKTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShzdWJzZXQpICE9PSB0cnVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbZXRoanMtdXRpbF0gbWV0aG9kIGFycmF5Q29udGFpbnNBcnJheSByZXF1aXJlcyBpbnB1dCBcXCdzdWJzZXRcXCcgdG8gYmUgYW4gYXJyYXkgZ290IHR5cGUgXFwnJyArIHR5cGVvZiBzdWJzZXQgKyAnXFwnJyk7XG4gIH1cblxuICByZXR1cm4gc3Vic2V0W0Jvb2xlYW4oc29tZSkgJiYgJ3NvbWUnIHx8ICdldmVyeSddKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBzdXBlcnNldC5pbmRleE9mKHZhbHVlKSA+PSAwO1xuICB9KTtcbn1cblxuLyoqXG4gKiBTaG91bGQgYmUgY2FsbGVkIHRvIGdldCB1dGY4IGZyb20gaXQncyBoZXggcmVwcmVzZW50YXRpb25cbiAqXG4gKiBAbWV0aG9kIHRvVXRmOFxuICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBpbiBoZXhcbiAqIEByZXR1cm5zIHtTdHJpbmd9IGFzY2lpIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBoZXggdmFsdWVcbiAqL1xuZnVuY3Rpb24gdG9VdGY4KGhleCkge1xuICB2YXIgYnVmZmVyVmFsdWUgPSBuZXcgQnVmZmVyKHBhZFRvRXZlbihzdHJpcEhleFByZWZpeChoZXgpLnJlcGxhY2UoL14wK3wwKyQvZywgJycpKSwgJ2hleCcpO1xuXG4gIHJldHVybiBidWZmZXJWYWx1ZS50b1N0cmluZygndXRmOCcpO1xufVxuXG4vKipcbiAqIFNob3VsZCBiZSBjYWxsZWQgdG8gZ2V0IGFzY2lpIGZyb20gaXQncyBoZXggcmVwcmVzZW50YXRpb25cbiAqXG4gKiBAbWV0aG9kIHRvQXNjaWlcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgaW4gaGV4XG4gKiBAcmV0dXJucyB7U3RyaW5nfSBhc2NpaSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgaGV4IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHRvQXNjaWkoaGV4KSB7XG4gIHZhciBzdHIgPSAnJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICB2YXIgaSA9IDAsXG4gICAgICBsID0gaGV4Lmxlbmd0aDsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIGlmIChoZXguc3Vic3RyaW5nKDAsIDIpID09PSAnMHgnKSB7XG4gICAgaSA9IDI7XG4gIH1cblxuICBmb3IgKDsgaSA8IGw7IGkgKz0gMikge1xuICAgIHZhciBjb2RlID0gcGFyc2VJbnQoaGV4LnN1YnN0cihpLCAyKSwgMTYpO1xuICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0cjtcbn1cblxuLyoqXG4gKiBTaG91bGQgYmUgY2FsbGVkIHRvIGdldCBoZXggcmVwcmVzZW50YXRpb24gKHByZWZpeGVkIGJ5IDB4KSBvZiB1dGY4IHN0cmluZ1xuICpcbiAqIEBtZXRob2QgZnJvbVV0ZjhcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmdcbiAqIEBwYXJhbSB7TnVtYmVyfSBvcHRpb25hbCBwYWRkaW5nXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBoZXggcmVwcmVzZW50YXRpb24gb2YgaW5wdXQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGZyb21VdGY4KHN0cmluZ1ZhbHVlKSB7XG4gIHZhciBzdHIgPSBuZXcgQnVmZmVyKHN0cmluZ1ZhbHVlLCAndXRmOCcpO1xuXG4gIHJldHVybiAnMHgnICsgcGFkVG9FdmVuKHN0ci50b1N0cmluZygnaGV4JykpLnJlcGxhY2UoL14wK3wwKyQvZywgJycpO1xufVxuXG4vKipcbiAqIFNob3VsZCBiZSBjYWxsZWQgdG8gZ2V0IGhleCByZXByZXNlbnRhdGlvbiAocHJlZml4ZWQgYnkgMHgpIG9mIGFzY2lpIHN0cmluZ1xuICpcbiAqIEBtZXRob2QgZnJvbUFzY2lpXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyaW5nXG4gKiBAcGFyYW0ge051bWJlcn0gb3B0aW9uYWwgcGFkZGluZ1xuICogQHJldHVybnMge1N0cmluZ30gaGV4IHJlcHJlc2VudGF0aW9uIG9mIGlucHV0IHN0cmluZ1xuICovXG5mdW5jdGlvbiBmcm9tQXNjaWkoc3RyaW5nVmFsdWUpIHtcbiAgdmFyIGhleCA9ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaW5nVmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgdmFyIGNvZGUgPSBzdHJpbmdWYWx1ZS5jaGFyQ29kZUF0KGkpO1xuICAgIHZhciBuID0gY29kZS50b1N0cmluZygxNik7XG4gICAgaGV4ICs9IG4ubGVuZ3RoIDwgMiA/ICcwJyArIG4gOiBuO1xuICB9XG5cbiAgcmV0dXJuICcweCcgKyBoZXg7XG59XG5cbi8qKlxuICogZ2V0S2V5cyhbe2E6IDEsIGI6IDJ9LCB7YTogMywgYjogNH1dLCAnYScpID0+IFsxLCAzXVxuICpcbiAqIEBtZXRob2QgZ2V0S2V5cyBnZXQgc3BlY2lmaWMga2V5IGZyb20gaW5uZXIgb2JqZWN0IGFycmF5IG9mIG9iamVjdHNcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbXNcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYWxsb3dFbXB0eVxuICogQHJldHVybnMge0FycmF5fSBvdXRwdXQganVzdCBhIHNpbXBsZSBhcnJheSBvZiBvdXRwdXQga2V5c1xuICovXG5mdW5jdGlvbiBnZXRLZXlzKHBhcmFtcywga2V5LCBhbGxvd0VtcHR5KSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShwYXJhbXMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbZXRoanMtdXRpbF0gbWV0aG9kIGdldEtleXMgZXhwZWN0aW5nIHR5cGUgQXJyYXkgYXMgXFwncGFyYW1zXFwnIGlucHV0LCBnb3QgXFwnJyArIHR5cGVvZiBwYXJhbXMgKyAnXFwnJyk7XG4gIH1cbiAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbZXRoanMtdXRpbF0gbWV0aG9kIGdldEtleXMgZXhwZWN0aW5nIHR5cGUgU3RyaW5nIGZvciBpbnB1dCBcXCdrZXlcXCcgZ290IFxcJycgKyB0eXBlb2Yga2V5ICsgJ1xcJy4nKTtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIHZhciB2YWx1ZSA9IHBhcmFtc1tpXVtrZXldOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgaWYgKGFsbG93RW1wdHkgJiYgIXZhbHVlKSB7XG4gICAgICB2YWx1ZSA9ICcnO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGFiaScpO1xuICAgIH1cbiAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIElzIHRoZSBzdHJpbmcgYSBoZXggc3RyaW5nLlxuICpcbiAqIEBtZXRob2QgY2hlY2sgaWYgc3RyaW5nIGlzIGhleCBzdHJpbmcgb2Ygc3BlY2lmaWMgbGVuZ3RoXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGhcbiAqIEByZXR1cm5zIHtCb29sZWFufSBvdXRwdXQgdGhlIHN0cmluZyBpcyBhIGhleCBzdHJpbmdcbiAqL1xuZnVuY3Rpb24gaXNIZXhTdHJpbmcodmFsdWUsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJyB8fCAhdmFsdWUubWF0Y2goL14weFswLTlBLUZhLWZdKiQvKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChsZW5ndGggJiYgdmFsdWUubGVuZ3RoICE9PSAyICsgMiAqIGxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXJyYXlDb250YWluc0FycmF5OiBhcnJheUNvbnRhaW5zQXJyYXksXG4gIGludFRvQnVmZmVyOiBpbnRUb0J1ZmZlcixcbiAgZ2V0QmluYXJ5U2l6ZTogZ2V0QmluYXJ5U2l6ZSxcbiAgaXNIZXhQcmVmaXhlZDogaXNIZXhQcmVmaXhlZCxcbiAgc3RyaXBIZXhQcmVmaXg6IHN0cmlwSGV4UHJlZml4LFxuICBwYWRUb0V2ZW46IHBhZFRvRXZlbixcbiAgaW50VG9IZXg6IGludFRvSGV4LFxuICBmcm9tQXNjaWk6IGZyb21Bc2NpaSxcbiAgZnJvbVV0Zjg6IGZyb21VdGY4LFxuICB0b0FzY2lpOiB0b0FzY2lpLFxuICB0b1V0Zjg6IHRvVXRmOCxcbiAgZ2V0S2V5czogZ2V0S2V5cyxcbiAgaXNIZXhTdHJpbmc6IGlzSGV4U3RyaW5nXG59OyIsIi8qKlxuICogUmV0dXJucyBhIGBCb29sZWFuYCBvbiB3aGV0aGVyIG9yIG5vdCB0aGUgYSBgU3RyaW5nYCBzdGFydHMgd2l0aCAnMHgnXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIHRoZSBzdHJpbmcgaW5wdXQgdmFsdWVcbiAqIEByZXR1cm4ge0Jvb2xlYW59IGEgYm9vbGVhbiBpZiBpdCBpcyBvciBpcyBub3QgaGV4IHByZWZpeGVkXG4gKiBAdGhyb3dzIGlmIHRoZSBzdHIgaW5wdXQgaXMgbm90IGEgc3RyaW5nXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNIZXhQcmVmaXhlZChzdHIpIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiW2lzLWhleC1wcmVmaXhlZF0gdmFsdWUgbXVzdCBiZSB0eXBlICdzdHJpbmcnLCBpcyBjdXJyZW50bHkgdHlwZSBcIiArICh0eXBlb2Ygc3RyKSArIFwiLCB3aGlsZSBjaGVja2luZyBpc0hleFByZWZpeGVkLlwiKTtcbiAgfVxuXG4gIHJldHVybiBzdHIuc2xpY2UoMCwgMikgPT09ICcweCc7XG59XG4iLCJ2YXIganNvbiA9IHR5cGVvZiBKU09OICE9PSAndW5kZWZpbmVkJyA/IEpTT04gOiByZXF1aXJlKCdqc29uaWZ5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaiwgb3B0cykge1xuICAgIGlmICghb3B0cykgb3B0cyA9IHt9O1xuICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ2Z1bmN0aW9uJykgb3B0cyA9IHsgY21wOiBvcHRzIH07XG4gICAgdmFyIHNwYWNlID0gb3B0cy5zcGFjZSB8fCAnJztcbiAgICBpZiAodHlwZW9mIHNwYWNlID09PSAnbnVtYmVyJykgc3BhY2UgPSBBcnJheShzcGFjZSsxKS5qb2luKCcgJyk7XG4gICAgdmFyIGN5Y2xlcyA9ICh0eXBlb2Ygb3B0cy5jeWNsZXMgPT09ICdib29sZWFuJykgPyBvcHRzLmN5Y2xlcyA6IGZhbHNlO1xuICAgIHZhciByZXBsYWNlciA9IG9wdHMucmVwbGFjZXIgfHwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cbiAgICB2YXIgY21wID0gb3B0cy5jbXAgJiYgKGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFvYmogPSB7IGtleTogYSwgdmFsdWU6IG5vZGVbYV0gfTtcbiAgICAgICAgICAgICAgICB2YXIgYm9iaiA9IHsga2V5OiBiLCB2YWx1ZTogbm9kZVtiXSB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBmKGFvYmosIGJvYmopO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9KShvcHRzLmNtcCk7XG5cbiAgICB2YXIgc2VlbiA9IFtdO1xuICAgIHJldHVybiAoZnVuY3Rpb24gc3RyaW5naWZ5IChwYXJlbnQsIGtleSwgbm9kZSwgbGV2ZWwpIHtcbiAgICAgICAgdmFyIGluZGVudCA9IHNwYWNlID8gKCdcXG4nICsgbmV3IEFycmF5KGxldmVsICsgMSkuam9pbihzcGFjZSkpIDogJyc7XG4gICAgICAgIHZhciBjb2xvblNlcGFyYXRvciA9IHNwYWNlID8gJzogJyA6ICc6JztcblxuICAgICAgICBpZiAobm9kZSAmJiBub2RlLnRvSlNPTiAmJiB0eXBlb2Ygbm9kZS50b0pTT04gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLnRvSlNPTigpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZSA9IHJlcGxhY2VyLmNhbGwocGFyZW50LCBrZXksIG5vZGUpO1xuXG4gICAgICAgIGlmIChub2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG5vZGUgIT09ICdvYmplY3QnIHx8IG5vZGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBqc29uLnN0cmluZ2lmeShub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheShub2RlKSkge1xuICAgICAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBzdHJpbmdpZnkobm9kZSwgaSwgbm9kZVtpXSwgbGV2ZWwrMSkgfHwganNvbi5zdHJpbmdpZnkobnVsbCk7XG4gICAgICAgICAgICAgICAgb3V0LnB1c2goaW5kZW50ICsgc3BhY2UgKyBpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAnWycgKyBvdXQuam9pbignLCcpICsgaW5kZW50ICsgJ10nO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNlZW4uaW5kZXhPZihub2RlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3ljbGVzKSByZXR1cm4ganNvbi5zdHJpbmdpZnkoJ19fY3ljbGVfXycpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NvbnZlcnRpbmcgY2lyY3VsYXIgc3RydWN0dXJlIHRvIEpTT04nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Ugc2Vlbi5wdXNoKG5vZGUpO1xuXG4gICAgICAgICAgICB2YXIga2V5cyA9IG9iamVjdEtleXMobm9kZSkuc29ydChjbXAgJiYgY21wKG5vZGUpKTtcbiAgICAgICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHN0cmluZ2lmeShub2RlLCBrZXksIG5vZGVba2V5XSwgbGV2ZWwrMSk7XG5cbiAgICAgICAgICAgICAgICBpZighdmFsdWUpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgdmFyIGtleVZhbHVlID0ganNvbi5zdHJpbmdpZnkoa2V5KVxuICAgICAgICAgICAgICAgICAgICArIGNvbG9uU2VwYXJhdG9yXG4gICAgICAgICAgICAgICAgICAgICsgdmFsdWU7XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGluZGVudCArIHNwYWNlICsga2V5VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2Vlbi5zcGxpY2Uoc2Vlbi5pbmRleE9mKG5vZGUpLCAxKTtcbiAgICAgICAgICAgIHJldHVybiAneycgKyBvdXQuam9pbignLCcpICsgaW5kZW50ICsgJ30nO1xuICAgICAgICB9XG4gICAgfSkoeyAnJzogb2JqIH0sICcnLCBvYmosIDApO1xufTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgICB2YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSB8fCBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlIH07XG4gICAgdmFyIGtleXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXMuY2FsbChvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbn07XG4iLCJleHBvcnRzLnBhcnNlID0gcmVxdWlyZSgnLi9saWIvcGFyc2UnKTtcbmV4cG9ydHMuc3RyaW5naWZ5ID0gcmVxdWlyZSgnLi9saWIvc3RyaW5naWZ5Jyk7XG4iLCJ2YXIgYXQsIC8vIFRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBjaGFyYWN0ZXJcbiAgICBjaCwgLy8gVGhlIGN1cnJlbnQgY2hhcmFjdGVyXG4gICAgZXNjYXBlZSA9IHtcbiAgICAgICAgJ1wiJzogICdcIicsXG4gICAgICAgICdcXFxcJzogJ1xcXFwnLFxuICAgICAgICAnLyc6ICAnLycsXG4gICAgICAgIGI6ICAgICdcXGInLFxuICAgICAgICBmOiAgICAnXFxmJyxcbiAgICAgICAgbjogICAgJ1xcbicsXG4gICAgICAgIHI6ICAgICdcXHInLFxuICAgICAgICB0OiAgICAnXFx0J1xuICAgIH0sXG4gICAgdGV4dCxcblxuICAgIGVycm9yID0gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgLy8gQ2FsbCBlcnJvciB3aGVuIHNvbWV0aGluZyBpcyB3cm9uZy5cbiAgICAgICAgdGhyb3cge1xuICAgICAgICAgICAgbmFtZTogICAgJ1N5bnRheEVycm9yJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG0sXG4gICAgICAgICAgICBhdDogICAgICBhdCxcbiAgICAgICAgICAgIHRleHQ6ICAgIHRleHRcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIFxuICAgIG5leHQgPSBmdW5jdGlvbiAoYykge1xuICAgICAgICAvLyBJZiBhIGMgcGFyYW1ldGVyIGlzIHByb3ZpZGVkLCB2ZXJpZnkgdGhhdCBpdCBtYXRjaGVzIHRoZSBjdXJyZW50IGNoYXJhY3Rlci5cbiAgICAgICAgaWYgKGMgJiYgYyAhPT0gY2gpIHtcbiAgICAgICAgICAgIGVycm9yKFwiRXhwZWN0ZWQgJ1wiICsgYyArIFwiJyBpbnN0ZWFkIG9mICdcIiArIGNoICsgXCInXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgdGhlIG5leHQgY2hhcmFjdGVyLiBXaGVuIHRoZXJlIGFyZSBubyBtb3JlIGNoYXJhY3RlcnMsXG4gICAgICAgIC8vIHJldHVybiB0aGUgZW1wdHkgc3RyaW5nLlxuICAgICAgICBcbiAgICAgICAgY2ggPSB0ZXh0LmNoYXJBdChhdCk7XG4gICAgICAgIGF0ICs9IDE7XG4gICAgICAgIHJldHVybiBjaDtcbiAgICB9LFxuICAgIFxuICAgIG51bWJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUGFyc2UgYSBudW1iZXIgdmFsdWUuXG4gICAgICAgIHZhciBudW1iZXIsXG4gICAgICAgICAgICBzdHJpbmcgPSAnJztcbiAgICAgICAgXG4gICAgICAgIGlmIChjaCA9PT0gJy0nKSB7XG4gICAgICAgICAgICBzdHJpbmcgPSAnLSc7XG4gICAgICAgICAgICBuZXh0KCctJyk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGNoID49ICcwJyAmJiBjaCA8PSAnOScpIHtcbiAgICAgICAgICAgIHN0cmluZyArPSBjaDtcbiAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2ggPT09ICcuJykge1xuICAgICAgICAgICAgc3RyaW5nICs9ICcuJztcbiAgICAgICAgICAgIHdoaWxlIChuZXh0KCkgJiYgY2ggPj0gJzAnICYmIGNoIDw9ICc5Jykge1xuICAgICAgICAgICAgICAgIHN0cmluZyArPSBjaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY2ggPT09ICdlJyB8fCBjaCA9PT0gJ0UnKSB7XG4gICAgICAgICAgICBzdHJpbmcgKz0gY2g7XG4gICAgICAgICAgICBuZXh0KCk7XG4gICAgICAgICAgICBpZiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnKSB7XG4gICAgICAgICAgICAgICAgc3RyaW5nICs9IGNoO1xuICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHdoaWxlIChjaCA+PSAnMCcgJiYgY2ggPD0gJzknKSB7XG4gICAgICAgICAgICAgICAgc3RyaW5nICs9IGNoO1xuICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBudW1iZXIgPSArc3RyaW5nO1xuICAgICAgICBpZiAoIWlzRmluaXRlKG51bWJlcikpIHtcbiAgICAgICAgICAgIGVycm9yKFwiQmFkIG51bWJlclwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudW1iZXI7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIHN0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUGFyc2UgYSBzdHJpbmcgdmFsdWUuXG4gICAgICAgIHZhciBoZXgsXG4gICAgICAgICAgICBpLFxuICAgICAgICAgICAgc3RyaW5nID0gJycsXG4gICAgICAgICAgICB1ZmZmZjtcbiAgICAgICAgXG4gICAgICAgIC8vIFdoZW4gcGFyc2luZyBmb3Igc3RyaW5nIHZhbHVlcywgd2UgbXVzdCBsb29rIGZvciBcIiBhbmQgXFwgY2hhcmFjdGVycy5cbiAgICAgICAgaWYgKGNoID09PSAnXCInKSB7XG4gICAgICAgICAgICB3aGlsZSAobmV4dCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoID09PSAnXCInKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2ggPT09ICd1Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdWZmZmYgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDQ7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhleCA9IHBhcnNlSW50KG5leHQoKSwgMTYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNGaW5pdGUoaGV4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdWZmZmYgPSB1ZmZmZiAqIDE2ICsgaGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodWZmZmYpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlc2NhcGVlW2NoXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyArPSBlc2NhcGVlW2NoXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IGNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlcnJvcihcIkJhZCBzdHJpbmdcIik7XG4gICAgfSxcblxuICAgIHdoaXRlID0gZnVuY3Rpb24gKCkge1xuXG4vLyBTa2lwIHdoaXRlc3BhY2UuXG5cbiAgICAgICAgd2hpbGUgKGNoICYmIGNoIDw9ICcgJykge1xuICAgICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHdvcmQgPSBmdW5jdGlvbiAoKSB7XG5cbi8vIHRydWUsIGZhbHNlLCBvciBudWxsLlxuXG4gICAgICAgIHN3aXRjaCAoY2gpIHtcbiAgICAgICAgY2FzZSAndCc6XG4gICAgICAgICAgICBuZXh0KCd0Jyk7XG4gICAgICAgICAgICBuZXh0KCdyJyk7XG4gICAgICAgICAgICBuZXh0KCd1Jyk7XG4gICAgICAgICAgICBuZXh0KCdlJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgY2FzZSAnZic6XG4gICAgICAgICAgICBuZXh0KCdmJyk7XG4gICAgICAgICAgICBuZXh0KCdhJyk7XG4gICAgICAgICAgICBuZXh0KCdsJyk7XG4gICAgICAgICAgICBuZXh0KCdzJyk7XG4gICAgICAgICAgICBuZXh0KCdlJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNhc2UgJ24nOlxuICAgICAgICAgICAgbmV4dCgnbicpO1xuICAgICAgICAgICAgbmV4dCgndScpO1xuICAgICAgICAgICAgbmV4dCgnbCcpO1xuICAgICAgICAgICAgbmV4dCgnbCcpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZXJyb3IoXCJVbmV4cGVjdGVkICdcIiArIGNoICsgXCInXCIpO1xuICAgIH0sXG5cbiAgICB2YWx1ZSwgIC8vIFBsYWNlIGhvbGRlciBmb3IgdGhlIHZhbHVlIGZ1bmN0aW9uLlxuXG4gICAgYXJyYXkgPSBmdW5jdGlvbiAoKSB7XG5cbi8vIFBhcnNlIGFuIGFycmF5IHZhbHVlLlxuXG4gICAgICAgIHZhciBhcnJheSA9IFtdO1xuXG4gICAgICAgIGlmIChjaCA9PT0gJ1snKSB7XG4gICAgICAgICAgICBuZXh0KCdbJyk7XG4gICAgICAgICAgICB3aGl0ZSgpO1xuICAgICAgICAgICAgaWYgKGNoID09PSAnXScpIHtcbiAgICAgICAgICAgICAgICBuZXh0KCddJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5OyAgIC8vIGVtcHR5IGFycmF5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAoY2gpIHtcbiAgICAgICAgICAgICAgICBhcnJheS5wdXNoKHZhbHVlKCkpO1xuICAgICAgICAgICAgICAgIHdoaXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNoID09PSAnXScpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCgnXScpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHQoJywnKTtcbiAgICAgICAgICAgICAgICB3aGl0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVycm9yKFwiQmFkIGFycmF5XCIpO1xuICAgIH0sXG5cbiAgICBvYmplY3QgPSBmdW5jdGlvbiAoKSB7XG5cbi8vIFBhcnNlIGFuIG9iamVjdCB2YWx1ZS5cblxuICAgICAgICB2YXIga2V5LFxuICAgICAgICAgICAgb2JqZWN0ID0ge307XG5cbiAgICAgICAgaWYgKGNoID09PSAneycpIHtcbiAgICAgICAgICAgIG5leHQoJ3snKTtcbiAgICAgICAgICAgIHdoaXRlKCk7XG4gICAgICAgICAgICBpZiAoY2ggPT09ICd9Jykge1xuICAgICAgICAgICAgICAgIG5leHQoJ30nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0OyAgIC8vIGVtcHR5IG9iamVjdFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGNoKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gc3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgd2hpdGUoKTtcbiAgICAgICAgICAgICAgICBuZXh0KCc6Jyk7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcignRHVwbGljYXRlIGtleSBcIicgKyBrZXkgKyAnXCInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2JqZWN0W2tleV0gPSB2YWx1ZSgpO1xuICAgICAgICAgICAgICAgIHdoaXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNoID09PSAnfScpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCgnfScpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXh0KCcsJyk7XG4gICAgICAgICAgICAgICAgd2hpdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlcnJvcihcIkJhZCBvYmplY3RcIik7XG4gICAgfTtcblxudmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cbi8vIFBhcnNlIGEgSlNPTiB2YWx1ZS4gSXQgY291bGQgYmUgYW4gb2JqZWN0LCBhbiBhcnJheSwgYSBzdHJpbmcsIGEgbnVtYmVyLFxuLy8gb3IgYSB3b3JkLlxuXG4gICAgd2hpdGUoKTtcbiAgICBzd2l0Y2ggKGNoKSB7XG4gICAgY2FzZSAneyc6XG4gICAgICAgIHJldHVybiBvYmplY3QoKTtcbiAgICBjYXNlICdbJzpcbiAgICAgICAgcmV0dXJuIGFycmF5KCk7XG4gICAgY2FzZSAnXCInOlxuICAgICAgICByZXR1cm4gc3RyaW5nKCk7XG4gICAgY2FzZSAnLSc6XG4gICAgICAgIHJldHVybiBudW1iZXIoKTtcbiAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gY2ggPj0gJzAnICYmIGNoIDw9ICc5JyA/IG51bWJlcigpIDogd29yZCgpO1xuICAgIH1cbn07XG5cbi8vIFJldHVybiB0aGUganNvbl9wYXJzZSBmdW5jdGlvbi4gSXQgd2lsbCBoYXZlIGFjY2VzcyB0byBhbGwgb2YgdGhlIGFib3ZlXG4vLyBmdW5jdGlvbnMgYW5kIHZhcmlhYmxlcy5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc291cmNlLCByZXZpdmVyKSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICBcbiAgICB0ZXh0ID0gc291cmNlO1xuICAgIGF0ID0gMDtcbiAgICBjaCA9ICcgJztcbiAgICByZXN1bHQgPSB2YWx1ZSgpO1xuICAgIHdoaXRlKCk7XG4gICAgaWYgKGNoKSB7XG4gICAgICAgIGVycm9yKFwiU3ludGF4IGVycm9yXCIpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIGEgcmV2aXZlciBmdW5jdGlvbiwgd2UgcmVjdXJzaXZlbHkgd2FsayB0aGUgbmV3IHN0cnVjdHVyZSxcbiAgICAvLyBwYXNzaW5nIGVhY2ggbmFtZS92YWx1ZSBwYWlyIHRvIHRoZSByZXZpdmVyIGZ1bmN0aW9uIGZvciBwb3NzaWJsZVxuICAgIC8vIHRyYW5zZm9ybWF0aW9uLCBzdGFydGluZyB3aXRoIGEgdGVtcG9yYXJ5IHJvb3Qgb2JqZWN0IHRoYXQgaG9sZHMgdGhlIHJlc3VsdFxuICAgIC8vIGluIGFuIGVtcHR5IGtleS4gSWYgdGhlcmUgaXMgbm90IGEgcmV2aXZlciBmdW5jdGlvbiwgd2Ugc2ltcGx5IHJldHVybiB0aGVcbiAgICAvLyByZXN1bHQuXG5cbiAgICByZXR1cm4gdHlwZW9mIHJldml2ZXIgPT09ICdmdW5jdGlvbicgPyAoZnVuY3Rpb24gd2Fsayhob2xkZXIsIGtleSkge1xuICAgICAgICB2YXIgaywgdiwgdmFsdWUgPSBob2xkZXJba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGZvciAoayBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGspKSB7XG4gICAgICAgICAgICAgICAgICAgIHYgPSB3YWxrKHZhbHVlLCBrKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVba10gPSB2O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHZhbHVlW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXZpdmVyLmNhbGwoaG9sZGVyLCBrZXksIHZhbHVlKTtcbiAgICB9KHsnJzogcmVzdWx0fSwgJycpKSA6IHJlc3VsdDtcbn07XG4iLCJ2YXIgY3ggPSAvW1xcdTAwMDBcXHUwMGFkXFx1MDYwMC1cXHUwNjA0XFx1MDcwZlxcdTE3YjRcXHUxN2I1XFx1MjAwYy1cXHUyMDBmXFx1MjAyOC1cXHUyMDJmXFx1MjA2MC1cXHUyMDZmXFx1ZmVmZlxcdWZmZjAtXFx1ZmZmZl0vZyxcbiAgICBlc2NhcGFibGUgPSAvW1xcXFxcXFwiXFx4MDAtXFx4MWZcXHg3Zi1cXHg5ZlxcdTAwYWRcXHUwNjAwLVxcdTA2MDRcXHUwNzBmXFx1MTdiNFxcdTE3YjVcXHUyMDBjLVxcdTIwMGZcXHUyMDI4LVxcdTIwMmZcXHUyMDYwLVxcdTIwNmZcXHVmZWZmXFx1ZmZmMC1cXHVmZmZmXS9nLFxuICAgIGdhcCxcbiAgICBpbmRlbnQsXG4gICAgbWV0YSA9IHsgICAgLy8gdGFibGUgb2YgY2hhcmFjdGVyIHN1YnN0aXR1dGlvbnNcbiAgICAgICAgJ1xcYic6ICdcXFxcYicsXG4gICAgICAgICdcXHQnOiAnXFxcXHQnLFxuICAgICAgICAnXFxuJzogJ1xcXFxuJyxcbiAgICAgICAgJ1xcZic6ICdcXFxcZicsXG4gICAgICAgICdcXHInOiAnXFxcXHInLFxuICAgICAgICAnXCInIDogJ1xcXFxcIicsXG4gICAgICAgICdcXFxcJzogJ1xcXFxcXFxcJ1xuICAgIH0sXG4gICAgcmVwO1xuXG5mdW5jdGlvbiBxdW90ZShzdHJpbmcpIHtcbiAgICAvLyBJZiB0aGUgc3RyaW5nIGNvbnRhaW5zIG5vIGNvbnRyb2wgY2hhcmFjdGVycywgbm8gcXVvdGUgY2hhcmFjdGVycywgYW5kIG5vXG4gICAgLy8gYmFja3NsYXNoIGNoYXJhY3RlcnMsIHRoZW4gd2UgY2FuIHNhZmVseSBzbGFwIHNvbWUgcXVvdGVzIGFyb3VuZCBpdC5cbiAgICAvLyBPdGhlcndpc2Ugd2UgbXVzdCBhbHNvIHJlcGxhY2UgdGhlIG9mZmVuZGluZyBjaGFyYWN0ZXJzIHdpdGggc2FmZSBlc2NhcGVcbiAgICAvLyBzZXF1ZW5jZXMuXG4gICAgXG4gICAgZXNjYXBhYmxlLmxhc3RJbmRleCA9IDA7XG4gICAgcmV0dXJuIGVzY2FwYWJsZS50ZXN0KHN0cmluZykgPyAnXCInICsgc3RyaW5nLnJlcGxhY2UoZXNjYXBhYmxlLCBmdW5jdGlvbiAoYSkge1xuICAgICAgICB2YXIgYyA9IG1ldGFbYV07XG4gICAgICAgIHJldHVybiB0eXBlb2YgYyA9PT0gJ3N0cmluZycgPyBjIDpcbiAgICAgICAgICAgICdcXFxcdScgKyAoJzAwMDAnICsgYS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpO1xuICAgIH0pICsgJ1wiJyA6ICdcIicgKyBzdHJpbmcgKyAnXCInO1xufVxuXG5mdW5jdGlvbiBzdHIoa2V5LCBob2xkZXIpIHtcbiAgICAvLyBQcm9kdWNlIGEgc3RyaW5nIGZyb20gaG9sZGVyW2tleV0uXG4gICAgdmFyIGksICAgICAgICAgIC8vIFRoZSBsb29wIGNvdW50ZXIuXG4gICAgICAgIGssICAgICAgICAgIC8vIFRoZSBtZW1iZXIga2V5LlxuICAgICAgICB2LCAgICAgICAgICAvLyBUaGUgbWVtYmVyIHZhbHVlLlxuICAgICAgICBsZW5ndGgsXG4gICAgICAgIG1pbmQgPSBnYXAsXG4gICAgICAgIHBhcnRpYWwsXG4gICAgICAgIHZhbHVlID0gaG9sZGVyW2tleV07XG4gICAgXG4gICAgLy8gSWYgdGhlIHZhbHVlIGhhcyBhIHRvSlNPTiBtZXRob2QsIGNhbGwgaXQgdG8gb2J0YWluIGEgcmVwbGFjZW1lbnQgdmFsdWUuXG4gICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZS50b0pTT04gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0pTT04oa2V5KTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgd2Ugd2VyZSBjYWxsZWQgd2l0aCBhIHJlcGxhY2VyIGZ1bmN0aW9uLCB0aGVuIGNhbGwgdGhlIHJlcGxhY2VyIHRvXG4gICAgLy8gb2J0YWluIGEgcmVwbGFjZW1lbnQgdmFsdWUuXG4gICAgaWYgKHR5cGVvZiByZXAgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdmFsdWUgPSByZXAuY2FsbChob2xkZXIsIGtleSwgdmFsdWUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBXaGF0IGhhcHBlbnMgbmV4dCBkZXBlbmRzIG9uIHRoZSB2YWx1ZSdzIHR5cGUuXG4gICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgIHJldHVybiBxdW90ZSh2YWx1ZSk7XG4gICAgICAgIFxuICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICAgICAgLy8gSlNPTiBudW1iZXJzIG11c3QgYmUgZmluaXRlLiBFbmNvZGUgbm9uLWZpbml0ZSBudW1iZXJzIGFzIG51bGwuXG4gICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUodmFsdWUpID8gU3RyaW5nKHZhbHVlKSA6ICdudWxsJztcbiAgICAgICAgXG4gICAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICBjYXNlICdudWxsJzpcbiAgICAgICAgICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBhIGJvb2xlYW4gb3IgbnVsbCwgY29udmVydCBpdCB0byBhIHN0cmluZy4gTm90ZTpcbiAgICAgICAgICAgIC8vIHR5cGVvZiBudWxsIGRvZXMgbm90IHByb2R1Y2UgJ251bGwnLiBUaGUgY2FzZSBpcyBpbmNsdWRlZCBoZXJlIGluXG4gICAgICAgICAgICAvLyB0aGUgcmVtb3RlIGNoYW5jZSB0aGF0IHRoaXMgZ2V0cyBmaXhlZCBzb21lZGF5LlxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgIGlmICghdmFsdWUpIHJldHVybiAnbnVsbCc7XG4gICAgICAgICAgICBnYXAgKz0gaW5kZW50O1xuICAgICAgICAgICAgcGFydGlhbCA9IFtdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBcnJheS5pc0FycmF5XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseSh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWxbaV0gPSBzdHIoaSwgdmFsdWUpIHx8ICdudWxsJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSm9pbiBhbGwgb2YgdGhlIGVsZW1lbnRzIHRvZ2V0aGVyLCBzZXBhcmF0ZWQgd2l0aCBjb21tYXMsIGFuZFxuICAgICAgICAgICAgICAgIC8vIHdyYXAgdGhlbSBpbiBicmFja2V0cy5cbiAgICAgICAgICAgICAgICB2ID0gcGFydGlhbC5sZW5ndGggPT09IDAgPyAnW10nIDogZ2FwID9cbiAgICAgICAgICAgICAgICAgICAgJ1tcXG4nICsgZ2FwICsgcGFydGlhbC5qb2luKCcsXFxuJyArIGdhcCkgKyAnXFxuJyArIG1pbmQgKyAnXScgOlxuICAgICAgICAgICAgICAgICAgICAnWycgKyBwYXJ0aWFsLmpvaW4oJywnKSArICddJztcbiAgICAgICAgICAgICAgICBnYXAgPSBtaW5kO1xuICAgICAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJZiB0aGUgcmVwbGFjZXIgaXMgYW4gYXJyYXksIHVzZSBpdCB0byBzZWxlY3QgdGhlIG1lbWJlcnMgdG8gYmVcbiAgICAgICAgICAgIC8vIHN0cmluZ2lmaWVkLlxuICAgICAgICAgICAgaWYgKHJlcCAmJiB0eXBlb2YgcmVwID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHJlcC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGsgPSByZXBbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgayA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBzdHIoaywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsLnB1c2gocXVvdGUoaykgKyAoZ2FwID8gJzogJyA6ICc6JykgKyB2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgaXRlcmF0ZSB0aHJvdWdoIGFsbCBvZiB0aGUga2V5cyBpbiB0aGUgb2JqZWN0LlxuICAgICAgICAgICAgICAgIGZvciAoayBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHN0cihrLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpYWwucHVzaChxdW90ZShrKSArIChnYXAgPyAnOiAnIDogJzonKSArIHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIC8vIEpvaW4gYWxsIG9mIHRoZSBtZW1iZXIgdGV4dHMgdG9nZXRoZXIsIHNlcGFyYXRlZCB3aXRoIGNvbW1hcyxcbiAgICAgICAgLy8gYW5kIHdyYXAgdGhlbSBpbiBicmFjZXMuXG5cbiAgICAgICAgdiA9IHBhcnRpYWwubGVuZ3RoID09PSAwID8gJ3t9JyA6IGdhcCA/XG4gICAgICAgICAgICAne1xcbicgKyBnYXAgKyBwYXJ0aWFsLmpvaW4oJyxcXG4nICsgZ2FwKSArICdcXG4nICsgbWluZCArICd9JyA6XG4gICAgICAgICAgICAneycgKyBwYXJ0aWFsLmpvaW4oJywnKSArICd9JztcbiAgICAgICAgZ2FwID0gbWluZDtcbiAgICAgICAgcmV0dXJuIHY7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh2YWx1ZSwgcmVwbGFjZXIsIHNwYWNlKSB7XG4gICAgdmFyIGk7XG4gICAgZ2FwID0gJyc7XG4gICAgaW5kZW50ID0gJyc7XG4gICAgXG4gICAgLy8gSWYgdGhlIHNwYWNlIHBhcmFtZXRlciBpcyBhIG51bWJlciwgbWFrZSBhbiBpbmRlbnQgc3RyaW5nIGNvbnRhaW5pbmcgdGhhdFxuICAgIC8vIG1hbnkgc3BhY2VzLlxuICAgIGlmICh0eXBlb2Ygc3BhY2UgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzcGFjZTsgaSArPSAxKSB7XG4gICAgICAgICAgICBpbmRlbnQgKz0gJyAnO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIElmIHRoZSBzcGFjZSBwYXJhbWV0ZXIgaXMgYSBzdHJpbmcsIGl0IHdpbGwgYmUgdXNlZCBhcyB0aGUgaW5kZW50IHN0cmluZy5cbiAgICBlbHNlIGlmICh0eXBlb2Ygc3BhY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGluZGVudCA9IHNwYWNlO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIGEgcmVwbGFjZXIsIGl0IG11c3QgYmUgYSBmdW5jdGlvbiBvciBhbiBhcnJheS5cbiAgICAvLyBPdGhlcndpc2UsIHRocm93IGFuIGVycm9yLlxuICAgIHJlcCA9IHJlcGxhY2VyO1xuICAgIGlmIChyZXBsYWNlciAmJiB0eXBlb2YgcmVwbGFjZXIgIT09ICdmdW5jdGlvbidcbiAgICAmJiAodHlwZW9mIHJlcGxhY2VyICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgcmVwbGFjZXIubGVuZ3RoICE9PSAnbnVtYmVyJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdKU09OLnN0cmluZ2lmeScpO1xuICAgIH1cbiAgICBcbiAgICAvLyBNYWtlIGEgZmFrZSByb290IG9iamVjdCBjb250YWluaW5nIG91ciB2YWx1ZSB1bmRlciB0aGUga2V5IG9mICcnLlxuICAgIC8vIFJldHVybiB0aGUgcmVzdWx0IG9mIHN0cmluZ2lmeWluZyB0aGUgdmFsdWUuXG4gICAgcmV0dXJuIHN0cignJywgeycnOiB2YWx1ZX0pO1xufTtcbiIsIjsoZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbid1c2Ugc3RyaWN0JztcblxudmFyIG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7IHNldFRpbWVvdXQoZm4sIDApOyB9XG5pZiAodHlwZW9mIHByb2Nlc3MgIT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2VzcyAmJiB0eXBlb2YgcHJvY2Vzcy5uZXh0VGljayA9PSAnZnVuY3Rpb24nKSB7XG5cdC8vIG5vZGUuanMgYW5kIHRoZSBsaWtlXG5cdG5leHRUaWNrID0gcHJvY2Vzcy5uZXh0VGljaztcbn1cblxuZnVuY3Rpb24gc2VtYXBob3JlKGNhcGFjaXR5KSB7XG5cdHZhciBzZW1hcGhvcmUgPSB7XG5cdFx0Y2FwYWNpdHk6IGNhcGFjaXR5IHx8IDEsXG5cdFx0Y3VycmVudDogMCxcblx0XHRxdWV1ZTogW10sXG5cdFx0Zmlyc3RIZXJlOiBmYWxzZSxcblxuXHRcdHRha2U6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKHNlbWFwaG9yZS5maXJzdEhlcmUgPT09IGZhbHNlKSB7XG4gICAgICAgIFx0XHRcdHNlbWFwaG9yZS5jdXJyZW50Kys7XG4gICAgICAgIFx0XHRcdHNlbWFwaG9yZS5maXJzdEhlcmUgPSB0cnVlO1xuICAgICAgICBcdFx0XHR2YXIgaXNGaXJzdCA9IDE7XG4gICAgICBcdFx0XHR9IGVsc2Uge1xuICAgICAgICBcdFx0XHR2YXIgaXNGaXJzdCA9IDA7XG4gICAgICBcdFx0XHR9XG5cdFx0XHR2YXIgaXRlbSA9IHsgbjogMSB9O1xuXG5cdFx0XHRpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGl0ZW0udGFzayA9IGFyZ3VtZW50c1swXTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGl0ZW0ubiA9IGFyZ3VtZW50c1swXTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMikgIHtcblx0XHRcdFx0aWYgKHR5cGVvZiBhcmd1bWVudHNbMV0gPT0gJ2Z1bmN0aW9uJykgaXRlbS50YXNrID0gYXJndW1lbnRzWzFdO1xuXHRcdFx0XHRlbHNlIGl0ZW0ubiA9IGFyZ3VtZW50c1sxXTtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHRhc2sgPSBpdGVtLnRhc2s7XG5cdFx0XHRpdGVtLnRhc2sgPSBmdW5jdGlvbigpIHsgdGFzayhzZW1hcGhvcmUubGVhdmUpOyB9O1xuXG5cdFx0XHRpZiAoc2VtYXBob3JlLmN1cnJlbnQgKyBpdGVtLm4gLSBpc0ZpcnN0ID4gc2VtYXBob3JlLmNhcGFjaXR5KSB7XG4gICAgICAgIFx0XHRcdGlmIChpc0ZpcnN0ID09PSAxKSB7XG4gICAgICAgIFx0XHRcdFx0c2VtYXBob3JlLmN1cnJlbnQtLTtcbiAgICAgICAgXHRcdFx0XHRzZW1hcGhvcmUuZmlyc3RIZXJlID0gZmFsc2U7XG4gICAgICAgIFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHNlbWFwaG9yZS5xdWV1ZS5wdXNoKGl0ZW0pO1xuXHRcdFx0fVxuXG5cdFx0XHRzZW1hcGhvcmUuY3VycmVudCArPSBpdGVtLm4gLSBpc0ZpcnN0O1xuXHRcdFx0aXRlbS50YXNrKHNlbWFwaG9yZS5sZWF2ZSk7XG4gICAgICBcdFx0XHRpZiAoaXNGaXJzdCA9PT0gMSkgc2VtYXBob3JlLmZpcnN0SGVyZSA9IGZhbHNlO1xuXHRcdH0sXG5cblx0XHRsZWF2ZTogZnVuY3Rpb24obikge1xuXHRcdFx0biA9IG4gfHwgMTtcblxuXHRcdFx0c2VtYXBob3JlLmN1cnJlbnQgLT0gbjtcblxuXHRcdFx0aWYgKCFzZW1hcGhvcmUucXVldWUubGVuZ3RoKSB7XG5cdFx0XHRcdGlmIChzZW1hcGhvcmUuY3VycmVudCA8IDApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2xlYXZlIGNhbGxlZCB0b28gbWFueSB0aW1lcy4nKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGl0ZW0gPSBzZW1hcGhvcmUucXVldWVbMF07XG5cblx0XHRcdGlmIChpdGVtLm4gKyBzZW1hcGhvcmUuY3VycmVudCA+IHNlbWFwaG9yZS5jYXBhY2l0eSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHNlbWFwaG9yZS5xdWV1ZS5zaGlmdCgpO1xuXHRcdFx0c2VtYXBob3JlLmN1cnJlbnQgKz0gaXRlbS5uO1xuXG5cdFx0XHRuZXh0VGljayhpdGVtLnRhc2spO1xuXHRcdH0sXG5cblx0XHRhdmFpbGFibGU6IGZ1bmN0aW9uKG4pIHtcblx0XHRcdG4gPSBuIHx8IDE7XG5cdFx0XHRyZXR1cm4oc2VtYXBob3JlLmN1cnJlbnQgKyBuIDw9IHNlbWFwaG9yZS5jYXBhY2l0eSk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBzZW1hcGhvcmU7XG59O1xuXG5pZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gbm9kZSBleHBvcnRcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHNlbWFwaG9yZTtcbn0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gYW1kIGV4cG9ydFxuICAgIGRlZmluZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzZW1hcGhvcmU7XG4gICAgfSk7XG59IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgZ2xvYmFsLnNlbWFwaG9yZSA9IHNlbWFwaG9yZTtcbn1cbn0odGhpcykpO1xuIiwidmFyIGlzSGV4UHJlZml4ZWQgPSByZXF1aXJlKCdpcy1oZXgtcHJlZml4ZWQnKTtcblxuLyoqXG4gKiBSZW1vdmVzICcweCcgZnJvbSBhIGdpdmVuIGBTdHJpbmdgIGlzIHByZXNlbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgdGhlIHN0cmluZyB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfE9wdGlvbmFsfSBhIHN0cmluZyBieSBwYXNzIGlmIG5lY2Vzc2FyeVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmlwSGV4UHJlZml4KHN0cikge1xuICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG5cbiAgcmV0dXJuIGlzSGV4UHJlZml4ZWQoc3RyKSA/IHN0ci5zbGljZSgyKSA6IHN0cjtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=