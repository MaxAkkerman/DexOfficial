(self.webpackChunkmy_swap=self.webpackChunkmy_swap||[]).push([[490],{14803:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s}),n(35666);var r=n(14113);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,u,"next",e)}function u(e){c(i,r,o,a,u,"throw",e)}a(void 0)}))}}n(44431),n(5942),n(51206);const s=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.heading,o=t.description,a=t.icon,c=t.html,s=t.button,l=!1;return r.a.subscribe((function(t){var n=t.walletCheckInProgress;!1===e&&!0===n&&(l=!1),e=n})),function(){var e=u(regeneratorRuntime.mark((function e(t){var f,p,w,h,b,d,v,k,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.network,p=t.appNetworkId,w=t.walletSelect,h=t.walletCheck,b=t.exit,d=t.stateSyncStatus,v=t.stateStore,k=t.wallet,null!==f){e.next=5;break}if(!d.network){e.next=5;break}return e.next=5,new Promise((function(e){d.network&&d.network.then(e),setTimeout((function(){null===f&&e(void 0)}),500)}));case 5:if(l||v.network.get()==p||"WalletConnect"===(0,r.f)(null==k?void 0:k.provider)){e.next=14;break}return e.prev=6,l=!0,e.next=10,null==k||null===(y=k.provider)||void 0===y?void 0:y.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x"+(null==p?void 0:p.toString(16))}]});case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:if(v.network.get()==p){e.next=16;break}return e.abrupt("return",{heading:n||"You Must Change Networks",description:o||"We've detected that you need to switch your wallet's network from <b>".concat((0,r.n)(f),"</b> to <b>").concat((0,r.n)(p),'</b> for this Dapp. <br><br> <i style="font-size: inherit; font-family: inherit;">*Some wallets may not support changing networks. If you can not change networks in your wallet you may consider switching to a different wallet.</i>'),eventCode:"networkFail",button:s||{onclick:function(){var e=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!1,{switchingWallets:!0}),e.next=3,w();case 3:if(t=e.sent,e.t0=t,!e.t0){e.next=9;break}return e.next=8,h();case 8:e.t0=e.sent;case 9:n=e.t0,r.a.update((function(e){return i(i({},e),{},{switchingWallets:!1,walletCheckCompleted:n})}));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),text:"Switch Wallet"},html:c,icon:a||r.h});case 16:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1zd2FwLy4vbm9kZV9tb2R1bGVzL2JuYy1vbmJvYXJkL2Rpc3QvZXNtL25ldHdvcmstODQ0YmFlNGUuanMiXSwibmFtZXMiOlsib3duS2V5cyIsIm9iamVjdCIsImVudW1lcmFibGVPbmx5Iiwia2V5cyIsIk9iamVjdCIsImdldE93blByb3BlcnR5U3ltYm9scyIsInN5bWJvbHMiLCJmaWx0ZXIiLCJzeW0iLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJmb3JFYWNoIiwia2V5IiwiX2RlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJkZWZpbmVQcm9wZXJ0eSIsIm9iaiIsInZhbHVlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJhc3luY0dlbmVyYXRvclN0ZXAiLCJnZW4iLCJyZXNvbHZlIiwicmVqZWN0IiwiX25leHQiLCJfdGhyb3ciLCJhcmciLCJpbmZvIiwiZXJyb3IiLCJkb25lIiwiUHJvbWlzZSIsInRoZW4iLCJfYXN5bmNUb0dlbmVyYXRvciIsImZuIiwic2VsZiIsInRoaXMiLCJhcmdzIiwiZXJyIiwidW5kZWZpbmVkIiwicHJldldhbGxldENoZWNrSW5Qcm9ncmVzc1ZhbHVlIiwib3B0aW9ucyIsImhlYWRpbmciLCJkZXNjcmlwdGlvbiIsImljb24iLCJodG1sIiwiYnV0dG9uIiwibmV0d29ya0NoZWNrUmVxdWVzdGVkIiwiYSIsIl9yZWYiLCJ3YWxsZXRDaGVja0luUHJvZ3Jlc3MiLCJfcmVmMiIsInJlZ2VuZXJhdG9yUnVudGltZSIsIm1hcmsiLCJfY2FsbGVlMiIsInN0YXRlQW5kSGVscGVycyIsIm5ldHdvcmsiLCJhcHBOZXR3b3JrSWQiLCJ3YWxsZXRTZWxlY3QiLCJ3YWxsZXRDaGVjayIsImV4aXQiLCJzdGF0ZVN5bmNTdGF0dXMiLCJzdGF0ZVN0b3JlIiwid2FsbGV0IiwiX3dhbGxldCRwcm92aWRlciIsIndyYXAiLCJfY29udGV4dDIiLCJwcmV2IiwibmV4dCIsInNldFRpbWVvdXQiLCJnZXQiLCJwcm92aWRlciIsInJlcXVlc3QiLCJtZXRob2QiLCJwYXJhbXMiLCJjaGFpbklkIiwidG9TdHJpbmciLCJ0MCIsImFicnVwdCIsImNvbmNhdCIsIm4iLCJldmVudENvZGUiLCJvbmNsaWNrIiwiX29uY2xpY2siLCJfY2FsbGVlIiwid2FsbGV0U2VsZWN0ZWQiLCJ3YWxsZXRSZWFkeSIsIl9jb250ZXh0Iiwic3dpdGNoaW5nV2FsbGV0cyIsInNlbnQiLCJzdG9yZSIsIndhbGxldENoZWNrQ29tcGxldGVkIiwic3RvcCIsInRleHQiLCJfeCJdLCJtYXBwaW5ncyI6IndKQUFBLFNBQVNBLEVBQVFDLEVBQVFDLEdBQWtCLElBQUlDLEVBQU9DLE9BQU9ELEtBQUtGLEdBQVMsR0FBSUcsT0FBT0Msc0JBQXVCLENBQUUsSUFBSUMsRUFBVUYsT0FBT0Msc0JBQXNCSixHQUFhQyxJQUFrQkksRUFBVUEsRUFBUUMsUUFBTyxTQUFVQyxHQUFPLE9BQU9KLE9BQU9LLHlCQUF5QlIsRUFBUU8sR0FBS0UsZUFBa0JQLEVBQUtRLEtBQUtDLE1BQU1ULEVBQU1HLEdBQVksT0FBT0gsRUFFbFYsU0FBU1UsRUFBY0MsR0FBVSxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUMsVUFBVUMsT0FBUUYsSUFBSyxDQUFFLElBQUlHLEVBQXlCLE1BQWhCRixVQUFVRCxHQUFhQyxVQUFVRCxHQUFLLEdBQVFBLEVBQUksRUFBS2YsRUFBUUksT0FBT2MsSUFBUyxHQUFNQyxTQUFRLFNBQVVDLEdBQU9DLEVBQWdCUCxFQUFRTSxFQUFLRixFQUFPRSxPQUFzQmhCLE9BQU9rQiwwQkFBNkJsQixPQUFPbUIsaUJBQWlCVCxFQUFRVixPQUFPa0IsMEJBQTBCSixJQUFtQmxCLEVBQVFJLE9BQU9jLElBQVNDLFNBQVEsU0FBVUMsR0FBT2hCLE9BQU9vQixlQUFlVixFQUFRTSxFQUFLaEIsT0FBT0sseUJBQXlCUyxFQUFRRSxPQUFlLE9BQU9OLEVBRTdnQixTQUFTTyxFQUFnQkksRUFBS0wsRUFBS00sR0FBaUssT0FBcEpOLEtBQU9LLEVBQU9yQixPQUFPb0IsZUFBZUMsRUFBS0wsRUFBSyxDQUFFTSxNQUFPQSxFQUFPaEIsWUFBWSxFQUFNaUIsY0FBYyxFQUFNQyxVQUFVLElBQWtCSCxFQUFJTCxHQUFPTSxFQUFnQkQsRUFFM00sU0FBU0ksRUFBbUJDLEVBQUtDLEVBQVNDLEVBQVFDLEVBQU9DLEVBQVFkLEVBQUtlLEdBQU8sSUFBTSxJQUFJQyxFQUFPTixFQUFJVixHQUFLZSxHQUFVVCxFQUFRVSxFQUFLVixNQUFTLE1BQU9XLEdBQXdCLFlBQWZMLEVBQU9LLEdBQXNCRCxFQUFLRSxLQUFRUCxFQUFRTCxHQUFpQmEsUUFBUVIsUUFBUUwsR0FBT2MsS0FBS1AsRUFBT0MsR0FFN1AsU0FBU08sRUFBa0JDLEdBQU0sT0FBTyxXQUFjLElBQUlDLEVBQU9DLEtBQU1DLEVBQU83QixVQUFXLE9BQU8sSUFBSXVCLFNBQVEsU0FBVVIsRUFBU0MsR0FBVSxJQUFJRixFQUFNWSxFQUFHOUIsTUFBTStCLEVBQU1FLEdBQU8sU0FBU1osRUFBTVAsR0FBU0csRUFBbUJDLEVBQUtDLEVBQVNDLEVBQVFDLEVBQU9DLEVBQVEsT0FBUVIsR0FBVSxTQUFTUSxFQUFPWSxHQUFPakIsRUFBbUJDLEVBQUtDLEVBQVNDLEVBQVFDLEVBQU9DLEVBQVEsUUFBU1ksR0FBUWIsT0FBTWMsTywwQkFtS2pYLFFBM0pBLFdBQ0UsSUFPSUMsRUFQQUMsRUFBVWpDLFVBQVVDLE9BQVMsUUFBc0I4QixJQUFqQi9CLFVBQVUsR0FBbUJBLFVBQVUsR0FBSyxHQUM5RWtDLEVBQVVELEVBQVFDLFFBQ2xCQyxFQUFjRixFQUFRRSxZQUN0QkMsRUFBT0gsRUFBUUcsS0FDZkMsRUFBT0osRUFBUUksS0FDZkMsRUFBU0wsRUFBUUssT0FDakJDLEdBQXdCLEVBVzVCLE9BVEEsRUFBQUMsRUFBQSxXQUFjLFNBQVVDLEdBQ3RCLElBQUlDLEVBQXdCRCxFQUFLQyx1QkFFTSxJQUFuQ1YsSUFBc0UsSUFBMUJVLElBQzlDSCxHQUF3QixHQUcxQlAsRUFBaUNVLEtBRWYsV0FDbEIsSUFBSUMsRUFBUWxCLEVBQWdDbUIsbUJBQW1CQyxNQUFLLFNBQVNDLEVBQVNDLEdBQ3BGLElBQUlDLEVBQVNDLEVBQWNDLEVBQWNDLEVBQWFDLEVBQU1DLEVBQWlCQyxFQUFZQyxFQUFRQyxFQUVqRyxPQUFPWixtQkFBbUJhLE1BQUssU0FBbUJDLEdBQ2hELE9BQ0UsT0FBUUEsRUFBVUMsS0FBT0QsRUFBVUUsTUFDakMsS0FBSyxFQUdILEdBRkFaLEVBQVVELEVBQWdCQyxRQUFTQyxFQUFlRixFQUFnQkUsYUFBY0MsRUFBZUgsRUFBZ0JHLGFBQWNDLEVBQWNKLEVBQWdCSSxZQUFhQyxFQUFPTCxFQUFnQkssS0FBTUMsRUFBa0JOLEVBQWdCTSxnQkFBaUJDLEVBQWFQLEVBQWdCTyxXQUFZQyxFQUFTUixFQUFnQlEsT0FFeFMsT0FBWlAsRUFBbUIsQ0FDdkJVLEVBQVVFLEtBQU8sRUFDakIsTUFHRixJQUFLUCxFQUFnQkwsUUFBUyxDQUM1QlUsRUFBVUUsS0FBTyxFQUNqQixNQUlGLE9BREFGLEVBQVVFLEtBQU8sRUFDVixJQUFJckMsU0FBUSxTQUFVUixHQUMzQnNDLEVBQWdCTCxTQUFXSyxFQUFnQkwsUUFBUXhCLEtBQUtULEdBQ3hEOEMsWUFBVyxXQUNPLE9BQVpiLEdBRUZqQyxPQUFRZ0IsS0FFVCxRQUdQLEtBQUssRUFDSCxHQUFPUSxHQUF5QmUsRUFBV04sUUFBUWMsT0FBU2IsR0FBcUcsbUJBQXJGLE9BQWdCTSxhQUF1QyxFQUFTQSxFQUFPUSxVQUFnQyxDQUNqTEwsRUFBVUUsS0FBTyxHQUNqQixNQU1GLE9BSEFGLEVBQVVDLEtBQU8sRUFDakJwQixHQUF3QixFQUN4Qm1CLEVBQVVFLEtBQU8sR0FDVkwsU0FBeUYsUUFBeENDLEVBQW1CRCxFQUFPUSxnQkFBMkMsSUFBckJQLE9BQTFELEVBQWlHQSxFQUFpQlEsUUFBUSxDQUN0S0MsT0FBUSw2QkFDUkMsT0FBUSxDQUFDLENBQ1BDLFFBQVMsTUFBUWxCLGFBQW1ELEVBQVNBLEVBQWFtQixTQUFTLFNBSXpHLEtBQUssR0FDSFYsRUFBVUUsS0FBTyxHQUNqQixNQUVGLEtBQUssR0FDSEYsRUFBVUMsS0FBTyxHQUNqQkQsRUFBVVcsR0FBS1gsRUFBaUIsTUFBRSxHQUVwQyxLQUFLLEdBQ0gsR0FBTUosRUFBV04sUUFBUWMsT0FBU2IsRUFBZSxDQUMvQ1MsRUFBVUUsS0FBTyxHQUNqQixNQUdGLE9BQU9GLEVBQVVZLE9BQU8sU0FBVSxDQUNoQ3BDLFFBQVNBLEdBQVcsMkJBQ3BCQyxZQUFhQSxHQUFlLHdFQUF3RW9DLFFBQU8sSUFBQUMsR0FBWXhCLEdBQVUsZUFBZXVCLFFBQU8sSUFBQUMsR0FBWXZCLEdBQWUsME9BQ2xMd0IsVUFBVyxjQUNYbkMsT0FBUUEsR0FBVSxDQUNoQm9DLFFBQVMsV0FDUCxJQUFJQyxFQUFXbEQsRUFBZ0NtQixtQkFBbUJDLE1BQUssU0FBUytCLElBQzlFLElBQUlDLEVBQWdCQyxFQUNwQixPQUFPbEMsbUJBQW1CYSxNQUFLLFNBQWtCc0IsR0FDL0MsT0FDRSxPQUFRQSxFQUFTcEIsS0FBT29CLEVBQVNuQixNQUMvQixLQUFLLEVBS0gsT0FKQVIsR0FBSyxFQUFPLENBQ1Y0QixrQkFBa0IsSUFFcEJELEVBQVNuQixLQUFPLEVBQ1RWLElBRVQsS0FBSyxFQUlILEdBSEEyQixFQUFpQkUsRUFBU0UsS0FDMUJGLEVBQVNWLEdBQUtRLEdBRVRFLEVBQVNWLEdBQUksQ0FDaEJVLEVBQVNuQixLQUFPLEVBQ2hCLE1BSUYsT0FEQW1CLEVBQVNuQixLQUFPLEVBQ1RULElBRVQsS0FBSyxFQUNINEIsRUFBU1YsR0FBS1UsRUFBU0UsS0FFekIsS0FBSyxFQUNISCxFQUFjQyxFQUFTVixHQUN2QixFQUFBN0IsRUFBQSxRQUFXLFNBQVUwQyxHQUNuQixPQUFPckYsRUFBY0EsRUFBYyxHQUFJcUYsR0FBUSxHQUFJLENBQ2pERixrQkFBa0IsRUFDbEJHLHFCQUFzQkwsT0FJNUIsS0FBSyxHQUNMLElBQUssTUFDSCxPQUFPQyxFQUFTSyxVQUdyQlIsT0FPTCxPQUpBLFdBQ0UsT0FBT0QsRUFBUy9FLE1BQU1nQyxLQUFNNUIsWUE5Q3ZCLEdBbURUcUYsS0FBTSxpQkFFUmhELEtBQU1BLEVBQ05ELEtBQU1BLEdBQVEsTUFHbEIsS0FBSyxHQUNMLElBQUssTUFDSCxPQUFPc0IsRUFBVTBCLFVBR3RCdEMsRUFBVSxLQUFNLENBQUMsQ0FBQyxFQUFHLFVBRzFCLE9BQU8sU0FBVXdDLEdBQ2YsT0FBTzNDLEVBQU0vQyxNQUFNZ0MsS0FBTTVCLFlBcElUIiwiZmlsZSI6IjQ5MC5tYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgeyBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IH0ga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwibmV4dFwiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfVxuXG5pbXBvcnQgJ3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSc7XG5pbXBvcnQgeyBhIGFzIGFwcCwgZiBhcyBnZXRQcm92aWRlck5hbWUsIG4gYXMgbmV0d29ya05hbWUsIGggYXMgbmV0d29ya0ljb24gfSBmcm9tICcuL29uYm9hcmQtYTM5NzdiODguanMnO1xuaW1wb3J0ICdiaWdudW1iZXIuanMnO1xuaW1wb3J0ICdibmMtc2RrJztcbmltcG9ydCAnYm93c2VyJztcblxuZnVuY3Rpb24gbmV0d29yaygpIHtcbiAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICB2YXIgaGVhZGluZyA9IG9wdGlvbnMuaGVhZGluZyxcbiAgICAgIGRlc2NyaXB0aW9uID0gb3B0aW9ucy5kZXNjcmlwdGlvbixcbiAgICAgIGljb24gPSBvcHRpb25zLmljb24sXG4gICAgICBodG1sID0gb3B0aW9ucy5odG1sLFxuICAgICAgYnV0dG9uID0gb3B0aW9ucy5idXR0b247XG4gIHZhciBuZXR3b3JrQ2hlY2tSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgdmFyIHByZXZXYWxsZXRDaGVja0luUHJvZ3Jlc3NWYWx1ZTtcbiAgYXBwLnN1YnNjcmliZShmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciB3YWxsZXRDaGVja0luUHJvZ3Jlc3MgPSBfcmVmLndhbGxldENoZWNrSW5Qcm9ncmVzcztcblxuICAgIGlmIChwcmV2V2FsbGV0Q2hlY2tJblByb2dyZXNzVmFsdWUgPT09IGZhbHNlICYmIHdhbGxldENoZWNrSW5Qcm9ncmVzcyA9PT0gdHJ1ZSkge1xuICAgICAgbmV0d29ya0NoZWNrUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJldldhbGxldENoZWNrSW5Qcm9ncmVzc1ZhbHVlID0gd2FsbGV0Q2hlY2tJblByb2dyZXNzO1xuICB9KTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihzdGF0ZUFuZEhlbHBlcnMpIHtcbiAgICAgIHZhciBuZXR3b3JrLCBhcHBOZXR3b3JrSWQsIHdhbGxldFNlbGVjdCwgd2FsbGV0Q2hlY2ssIGV4aXQsIHN0YXRlU3luY1N0YXR1cywgc3RhdGVTdG9yZSwgd2FsbGV0LCBfd2FsbGV0JHByb3ZpZGVyO1xuXG4gICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0Mikge1xuICAgICAgICB3aGlsZSAoMSkge1xuICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICBuZXR3b3JrID0gc3RhdGVBbmRIZWxwZXJzLm5ldHdvcmssIGFwcE5ldHdvcmtJZCA9IHN0YXRlQW5kSGVscGVycy5hcHBOZXR3b3JrSWQsIHdhbGxldFNlbGVjdCA9IHN0YXRlQW5kSGVscGVycy53YWxsZXRTZWxlY3QsIHdhbGxldENoZWNrID0gc3RhdGVBbmRIZWxwZXJzLndhbGxldENoZWNrLCBleGl0ID0gc3RhdGVBbmRIZWxwZXJzLmV4aXQsIHN0YXRlU3luY1N0YXR1cyA9IHN0YXRlQW5kSGVscGVycy5zdGF0ZVN5bmNTdGF0dXMsIHN0YXRlU3RvcmUgPSBzdGF0ZUFuZEhlbHBlcnMuc3RhdGVTdG9yZSwgd2FsbGV0ID0gc3RhdGVBbmRIZWxwZXJzLndhbGxldDtcblxuICAgICAgICAgICAgICBpZiAoIShuZXR3b3JrID09PSBudWxsKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICghc3RhdGVTeW5jU3RhdHVzLm5ldHdvcmspIHtcbiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7XG4gICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgIHN0YXRlU3luY1N0YXR1cy5uZXR3b3JrICYmIHN0YXRlU3luY1N0YXR1cy5uZXR3b3JrLnRoZW4ocmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICBpZiAobmV0d29yayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBwcm9tIGlzbid0IHJlc29sdmluZyBhZnRlciA1MDBtcywgdGhlbiBzdG9wIHdhaXRpbmdcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgIGlmICghKCFuZXR3b3JrQ2hlY2tSZXF1ZXN0ZWQgJiYgc3RhdGVTdG9yZS5uZXR3b3JrLmdldCgpICE9IGFwcE5ldHdvcmtJZCAmJiBnZXRQcm92aWRlck5hbWUod2FsbGV0ID09PSBudWxsIHx8IHdhbGxldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogd2FsbGV0LnByb3ZpZGVyKSAhPT0gJ1dhbGxldENvbm5lY3QnKSkge1xuICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDY7XG4gICAgICAgICAgICAgIG5ldHdvcmtDaGVja1JlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7XG4gICAgICAgICAgICAgIHJldHVybiB3YWxsZXQgPT09IG51bGwgfHwgd2FsbGV0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3dhbGxldCRwcm92aWRlciA9IHdhbGxldC5wcm92aWRlcikgPT09IG51bGwgfHwgX3dhbGxldCRwcm92aWRlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dhbGxldCRwcm92aWRlci5yZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICd3YWxsZXRfc3dpdGNoRXRoZXJldW1DaGFpbicsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBbe1xuICAgICAgICAgICAgICAgICAgY2hhaW5JZDogJzB4JyArIChhcHBOZXR3b3JrSWQgPT09IG51bGwgfHwgYXBwTmV0d29ya0lkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcHBOZXR3b3JrSWQudG9TdHJpbmcoMTYpKVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0O1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMjtcbiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyW1wiY2F0Y2hcIl0oNik7XG5cbiAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgIGlmICghKHN0YXRlU3RvcmUubmV0d29yay5nZXQoKSAhPSBhcHBOZXR3b3JrSWQpKSB7XG4gICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KFwicmV0dXJuXCIsIHtcbiAgICAgICAgICAgICAgICBoZWFkaW5nOiBoZWFkaW5nIHx8ICdZb3UgTXVzdCBDaGFuZ2UgTmV0d29ya3MnLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB8fCBcIldlJ3ZlIGRldGVjdGVkIHRoYXQgeW91IG5lZWQgdG8gc3dpdGNoIHlvdXIgd2FsbGV0J3MgbmV0d29yayBmcm9tIDxiPlwiLmNvbmNhdChuZXR3b3JrTmFtZShuZXR3b3JrKSwgXCI8L2I+IHRvIDxiPlwiKS5jb25jYXQobmV0d29ya05hbWUoYXBwTmV0d29ya0lkKSwgXCI8L2I+IGZvciB0aGlzIERhcHAuIDxicj48YnI+IDxpIHN0eWxlPVxcXCJmb250LXNpemU6IGluaGVyaXQ7IGZvbnQtZmFtaWx5OiBpbmhlcml0O1xcXCI+KlNvbWUgd2FsbGV0cyBtYXkgbm90IHN1cHBvcnQgY2hhbmdpbmcgbmV0d29ya3MuIElmIHlvdSBjYW4gbm90IGNoYW5nZSBuZXR3b3JrcyBpbiB5b3VyIHdhbGxldCB5b3UgbWF5IGNvbnNpZGVyIHN3aXRjaGluZyB0byBhIGRpZmZlcmVudCB3YWxsZXQuPC9pPlwiKSxcbiAgICAgICAgICAgICAgICBldmVudENvZGU6ICduZXR3b3JrRmFpbCcsXG4gICAgICAgICAgICAgICAgYnV0dG9uOiBidXR0b24gfHwge1xuICAgICAgICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX29uY2xpY2sgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIHdhbGxldFNlbGVjdGVkLCB3YWxsZXRSZWFkeTtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGl0KGZhbHNlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaGluZ1dhbGxldHM6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2FsbGV0U2VsZWN0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXRTZWxlY3RlZCA9IF9jb250ZXh0LnNlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IHdhbGxldFNlbGVjdGVkO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV9jb250ZXh0LnQwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2FsbGV0Q2hlY2soKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHQuc2VudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhbGxldFJlYWR5ID0gX2NvbnRleHQudDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAudXBkYXRlKGZ1bmN0aW9uIChzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdG9yZSksIHt9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoaW5nV2FsbGV0czogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FsbGV0Q2hlY2tDb21wbGV0ZWQ6IHdhbGxldFJlYWR5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uY2xpY2soKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9vbmNsaWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25jbGljaztcbiAgICAgICAgICAgICAgICAgIH0oKSxcbiAgICAgICAgICAgICAgICAgIHRleHQ6ICdTd2l0Y2ggV2FsbGV0J1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaHRtbDogaHRtbCxcbiAgICAgICAgICAgICAgICBpY29uOiBpY29uIHx8IG5ldHdvcmtJY29uXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzYsIDEyXV0pO1xuICAgIH0pKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHtcbiAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0oKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV0d29yazsiXSwic291cmNlUm9vdCI6IiJ9