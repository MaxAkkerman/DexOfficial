(self.webpackChunkmy_swap=self.webpackChunkmy_swap||[]).push([[6844],{96844:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SafeAppProvider=void 0;var r=n(26221);Object.defineProperty(t,"SafeAppProvider",{enumerable:!0,get:function(){return r.SafeAppProvider}})},26221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SafeAppProvider=void 0;const r=n(17187),s=n(11509);t.SafeAppProvider=class{constructor(e,t){this.submittedTxs=new Map,this.events=new r.EventEmitter,this.safe=e,this.sdk=t}async connect(){this.events.emit("connect",{chainId:this.chainId})}async disconnect(){}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}get chainId(){return this.safe.chainId}async request(e){const{method:t,params:n=[]}=e;switch(t){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return`0x${this.chainId.toString(16)}`;case"eth_sendTransaction":const t=Object.assign({value:"0",data:"0x"},n[0]),r=await this.sdk.txs.send({txs:[t]});return this.submittedTxs.set(r.safeTxHash,{from:this.safe.safeAddress,hash:r.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:t.data,value:t.value,to:t.to,blockHash:null,blockNumber:null,transactionIndex:null}),r.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([s.getLowerCase(n[0]),n[1]]);case"eth_getCode":return this.sdk.eth.getCode([s.getLowerCase(n[0]),n[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([s.getLowerCase(n[0]),n[1],n[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([n[0],n[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([n[0],n[1]]);case"eth_getTransactionByHash":let i=n[0];try{i=(await this.sdk.txs.getBySafeTxHash(i)).transactionHash||i}catch(e){}return this.submittedTxs.has(i)?this.submittedTxs.get(i):this.sdk.eth.getTransactionByHash([i]).then((e=>(e&&(e.hash=n[0]),e)));case"eth_getTransactionReceipt":{let e=n[0];try{e=(await this.sdk.txs.getBySafeTxHash(e)).transactionHash||e}catch(e){}return this.sdk.eth.getTransactionReceipt([e]).then((e=>(e&&(e.transactionHash=n[0]),e)))}case"eth_estimateGas":return 0;case"eth_call":return this.sdk.eth.call([n[0],n[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([n[0]]);default:throw Error(`"${e.method}" not implemented`)}}send(e,t){e||t("Undefined request"),this.request(e).then((n=>t(null,{jsonrpc:"2.0",id:e.id,result:n}))).catch((e=>t(e,null)))}}},11509:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLowerCase=void 0,t.getLowerCase=function(e){return e?e.toLowerCase():e}},17187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,r){function s(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",s),n([].slice.call(arguments))}d(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&d(e,"error",t,{once:!0})}(e,s)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var s,i,o,c;if(a(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),o=i[t]),void 0===o)o=i[t]=n,++e._eventsCount;else if("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(s=u(e))>0&&o.length>s&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=o.length,c=h,console&&console.warn&&console.warn(c)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=h.bind(r);return s.listener=n,r.wrapFn=s,s}function l(e,t,n){var r=e._events;if(void 0===r)return[];var s=r[t];return void 0===s?[]:"function"==typeof s?n?[s.listener||s]:[s]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(s):p(s,s.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function d(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function s(i){r.once&&e.removeEventListener(t,s),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var s="error"===e,i=this._events;if(void 0!==i)s=s&&void 0===i.error;else if(!s)return!1;if(s){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)r(u,this,t);else{var c=u.length,h=p(u,c);for(n=0;n<c;++n)r(h[n],this,t)}return!0},i.prototype.addListener=function(e,t){return c(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return c(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,f(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,f(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,s,i,o;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(s=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){o=n[i].listener,s=i;break}if(s<0)return this;0===s?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,s),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var s,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(s=i[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return l(this,e,!0)},i.prototype.rawListeners=function(e){return l(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},i.prototype.listenerCount=v,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1zd2FwLy4vbm9kZV9tb2R1bGVzL0Bnbm9zaXMucG0vc2FmZS1hcHBzLXByb3ZpZGVyL2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbXktc3dhcC8uL25vZGVfbW9kdWxlcy9AZ25vc2lzLnBtL3NhZmUtYXBwcy1wcm92aWRlci9kaXN0L3Byb3ZpZGVyLmpzIiwid2VicGFjazovL215LXN3YXAvLi9ub2RlX21vZHVsZXMvQGdub3Npcy5wbS9zYWZlLWFwcHMtcHJvdmlkZXIvZGlzdC91dGlscy5qcyIsIndlYnBhY2s6Ly9teS1zd2FwLy4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJTYWZlQXBwUHJvdmlkZXIiLCJwcm92aWRlcl8xIiwiZW51bWVyYWJsZSIsImdldCIsImV2ZW50c18xIiwidXRpbHNfMSIsInNhZmUiLCJzZGsiLCJ0aGlzIiwic3VibWl0dGVkVHhzIiwiTWFwIiwiZXZlbnRzIiwiRXZlbnRFbWl0dGVyIiwiZW1pdCIsImNoYWluSWQiLCJldmVudCIsImxpc3RlbmVyIiwib24iLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZXF1ZXN0IiwibWV0aG9kIiwicGFyYW1zIiwic2FmZUFkZHJlc3MiLCJ0b1N0cmluZyIsInR4IiwiYXNzaWduIiwiZGF0YSIsInJlc3AiLCJ0eHMiLCJzZW5kIiwic2V0Iiwic2FmZVR4SGFzaCIsImZyb20iLCJoYXNoIiwiZ2FzIiwiZ2FzUHJpY2UiLCJub25jZSIsImlucHV0IiwidG8iLCJibG9ja0hhc2giLCJibG9ja051bWJlciIsInRyYW5zYWN0aW9uSW5kZXgiLCJldGgiLCJnZXRCbG9ja0J5TnVtYmVyIiwibnVtYmVyIiwiZ2V0QmFsYW5jZSIsImdldExvd2VyQ2FzZSIsImdldENvZGUiLCJnZXRTdG9yYWdlQXQiLCJnZXRCbG9ja0J5SGFzaCIsInR4SGFzaCIsImdldEJ5U2FmZVR4SGFzaCIsInRyYW5zYWN0aW9uSGFzaCIsImUiLCJoYXMiLCJnZXRUcmFuc2FjdGlvbkJ5SGFzaCIsInRoZW4iLCJnZXRUcmFuc2FjdGlvblJlY2VpcHQiLCJjYWxsIiwiZ2V0UGFzdExvZ3MiLCJFcnJvciIsImNhbGxiYWNrIiwicmVzdWx0IiwianNvbnJwYyIsImlkIiwiY2F0Y2giLCJlcnJvciIsInRvTG93ZXJDYXNlIiwiUmVmbGVjdE93bktleXMiLCJSIiwiUmVmbGVjdCIsIlJlZmxlY3RBcHBseSIsImFwcGx5IiwidGFyZ2V0IiwicmVjZWl2ZXIiLCJhcmdzIiwiRnVuY3Rpb24iLCJwcm90b3R5cGUiLCJvd25LZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImNvbmNhdCIsIk51bWJlcklzTmFOIiwiTnVtYmVyIiwiaXNOYU4iLCJpbml0IiwibW9kdWxlIiwiZW1pdHRlciIsIm5hbWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVycm9yTGlzdGVuZXIiLCJlcnIiLCJyZXNvbHZlciIsInNsaWNlIiwiYXJndW1lbnRzIiwiZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyIiwiaGFuZGxlciIsImZsYWdzIiwiYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIiLCJfZXZlbnRzIiwidW5kZWZpbmVkIiwiX2V2ZW50c0NvdW50IiwiX21heExpc3RlbmVycyIsImRlZmF1bHRNYXhMaXN0ZW5lcnMiLCJjaGVja0xpc3RlbmVyIiwiVHlwZUVycm9yIiwiX2dldE1heExpc3RlbmVycyIsInRoYXQiLCJfYWRkTGlzdGVuZXIiLCJ0eXBlIiwicHJlcGVuZCIsIm0iLCJleGlzdGluZyIsIndhcm5pbmciLCJjcmVhdGUiLCJuZXdMaXN0ZW5lciIsInVuc2hpZnQiLCJwdXNoIiwibGVuZ3RoIiwid2FybmVkIiwidyIsIlN0cmluZyIsImNvdW50IiwiY29uc29sZSIsIndhcm4iLCJvbmNlV3JhcHBlciIsImZpcmVkIiwid3JhcEZuIiwiX29uY2VXcmFwIiwic3RhdGUiLCJ3cmFwcGVkIiwiYmluZCIsIl9saXN0ZW5lcnMiLCJ1bndyYXAiLCJldmxpc3RlbmVyIiwiYXJyIiwicmV0IiwiQXJyYXkiLCJpIiwidW53cmFwTGlzdGVuZXJzIiwiYXJyYXlDbG9uZSIsImxpc3RlbmVyQ291bnQiLCJuIiwiY29weSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3cmFwTGlzdGVuZXIiLCJhcmciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUmFuZ2VFcnJvciIsImdldFByb3RvdHlwZU9mIiwic2V0TWF4TGlzdGVuZXJzIiwiZ2V0TWF4TGlzdGVuZXJzIiwiZG9FcnJvciIsImVyIiwibWVzc2FnZSIsImNvbnRleHQiLCJsZW4iLCJsaXN0ZW5lcnMiLCJhZGRMaXN0ZW5lciIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0IiwicG9zaXRpb24iLCJvcmlnaW5hbExpc3RlbmVyIiwic2hpZnQiLCJpbmRleCIsInBvcCIsInNwbGljZU9uZSIsInJlbW92ZUFsbExpc3RlbmVycyIsImtleSIsImtleXMiLCJyYXdMaXN0ZW5lcnMiLCJldmVudE5hbWVzIl0sIm1hcHBpbmdzIjoibUdBQ0FBLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUFFQyxPQUFPLElBQ3RERCxFQUFRRSxxQkFBa0IsRUFDMUIsSUFBSUMsRUFBYSxFQUFRLE9BQ3pCTCxPQUFPQyxlQUFlQyxFQUFTLGtCQUFtQixDQUFFSSxZQUFZLEVBQU1DLElBQUssV0FBYyxPQUFPRixFQUFXRCxvQiw2QkNIM0dKLE9BQU9DLGVBQWVDLEVBQVMsYUFBYyxDQUFFQyxPQUFPLElBQ3RERCxFQUFRRSxxQkFBa0IsRUFDMUIsTUFBTUksRUFBVyxFQUFRLE9BQ25CQyxFQUFVLEVBQVEsT0FnSXhCUCxFQUFRRSxnQkE5SFIsTUFDSSxZQUFZTSxFQUFNQyxHQUNkQyxLQUFLQyxhQUFlLElBQUlDLElBQ3hCRixLQUFLRyxPQUFTLElBQUlQLEVBQVNRLGFBQzNCSixLQUFLRixL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RUFBUXdELGNBQWNoQyxHQUV0QmdDLEVBQWNyRixLQUFLNkIsRUFBU3dCLElBSXZDckcsRUFBYW1FLFVBQVVrRSxjQUFnQkEsRUFpQnZDckksRUFBYW1FLFVBQVVpRyxXQUFhLFdBQ2xDLE9BQU94SyxLQUFLaUcsYUFBZSxFQUFJbkMsRUFBZTlELEtBQUsrRixTQUFXIiwiZmlsZSI6IjY4NDQubWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TYWZlQXBwUHJvdmlkZXIgPSB2b2lkIDA7XG52YXIgcHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL3Byb3ZpZGVyXCIpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiU2FmZUFwcFByb3ZpZGVyXCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBwcm92aWRlcl8xLlNhZmVBcHBQcm92aWRlcjsgfSB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5TYWZlQXBwUHJvdmlkZXIgPSB2b2lkIDA7XG5jb25zdCBldmVudHNfMSA9IHJlcXVpcmUoXCJldmVudHNcIik7XG5jb25zdCB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG4vLyBUaGUgQVBJIGlzIGJhc2VkIG9uIEV0aGVyZXVtIEphdmFTY3JpcHQgQVBJIFByb3ZpZGVyIFN0YW5kYXJkLiBMaW5rOiBodHRwczovL2VpcHMuZXRoZXJldW0ub3JnL0VJUFMvZWlwLTExOTNcbmNsYXNzIFNhZmVBcHBQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3Ioc2FmZSwgc2RrKSB7XG4gICAgICAgIHRoaXMuc3VibWl0dGVkVHhzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBldmVudHNfMS5FdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5zYWZlID0gc2FmZTtcbiAgICAgICAgdGhpcy5zZGsgPSBzZGs7XG4gICAgfVxuICAgIGFzeW5jIGNvbm5lY3QoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzLmVtaXQoJ2Nvbm5lY3QnLCB7IGNoYWluSWQ6IHRoaXMuY2hhaW5JZCB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3luYyBkaXNjb25uZWN0KCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIG9uKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50cy5vbihldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICBvbmNlKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50cy5vbmNlKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIG9mZihldmVudCwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudHMub2ZmKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIHJlbW92ZUxpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmV2ZW50cy5yZW1vdmVMaXN0ZW5lcihldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICBnZXQgY2hhaW5JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2FmZS5jaGFpbklkO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGFzeW5jIHJlcXVlc3QocmVxdWVzdCkge1xuICAgICAgICBjb25zdCB7IG1ldGhvZCwgcGFyYW1zID0gW10gfSA9IHJlcXVlc3Q7XG4gICAgICAgIHN3aXRjaCAobWV0aG9kKSB7XG4gICAgICAgICAgICBjYXNlICdldGhfYWNjb3VudHMnOlxuICAgICAgICAgICAgICAgIHJldHVybiBbdGhpcy5zYWZlLnNhZmVBZGRyZXNzXTtcbiAgICAgICAgICAgIGNhc2UgJ25ldF92ZXJzaW9uJzpcbiAgICAgICAgICAgIGNhc2UgJ2V0aF9jaGFpbklkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYDB4JHt0aGlzLmNoYWluSWQudG9TdHJpbmcoMTYpfWA7XG4gICAgICAgICAgICBjYXNlICdldGhfc2VuZFRyYW5zYWN0aW9uJzpcbiAgICAgICAgICAgICAgICBjb25zdCB0eCA9IE9iamVjdC5hc3NpZ24oeyB2YWx1ZTogJzAnLCBkYXRhOiAnMHgnIH0sIHBhcmFtc1swXSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHRoaXMuc2RrLnR4cy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgdHhzOiBbdHhdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIFN0b3JlIGZha2UgdHJhbnNhY3Rpb25cbiAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdHRlZFR4cy5zZXQocmVzcC5zYWZlVHhIYXNoLCB7XG4gICAgICAgICAgICAgICAgICAgIGZyb206IHRoaXMuc2FmZS5zYWZlQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgaGFzaDogcmVzcC5zYWZlVHhIYXNoLFxuICAgICAgICAgICAgICAgICAgICBnYXM6IDAsXG4gICAgICAgICAgICAgICAgICAgIGdhc1ByaWNlOiAnMHgwMCcsXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlOiAwLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dDogdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHR4LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0bzogdHgudG8sXG4gICAgICAgICAgICAgICAgICAgIGJsb2NrSGFzaDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tOdW1iZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uSW5kZXg6IG51bGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3Auc2FmZVR4SGFzaDtcbiAgICAgICAgICAgIGNhc2UgJ2V0aF9ibG9ja051bWJlcic6XG4gICAgICAgICAgICAgICAgY29uc3QgYmxvY2sgPSBhd2FpdCB0aGlzLnNkay5ldGguZ2V0QmxvY2tCeU51bWJlcihbJ2xhdGVzdCddKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2subnVtYmVyO1xuICAgICAgICAgICAgY2FzZSAnZXRoX2dldEJhbGFuY2UnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNkay5ldGguZ2V0QmFsYW5jZShbdXRpbHNfMS5nZXRMb3dlckNhc2UocGFyYW1zWzBdKSwgcGFyYW1zWzFdXSk7XG4gICAgICAgICAgICBjYXNlICdldGhfZ2V0Q29kZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2RrLmV0aC5nZXRDb2RlKFt1dGlsc18xLmdldExvd2VyQ2FzZShwYXJhbXNbMF0pLCBwYXJhbXNbMV1dKTtcbiAgICAgICAgICAgIGNhc2UgJ2V0aF9nZXRTdG9yYWdlQXQnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNkay5ldGguZ2V0U3RvcmFnZUF0KFt1dGlsc18xLmdldExvd2VyQ2FzZShwYXJhbXNbMF0pLCBwYXJhbXNbMV0sIHBhcmFtc1syXV0pO1xuICAgICAgICAgICAgY2FzZSAnZXRoX2dldEJsb2NrQnlOdW1iZXInOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNkay5ldGguZ2V0QmxvY2tCeU51bWJlcihbcGFyYW1zWzBdLCBwYXJhbXNbMV1dKTtcbiAgICAgICAgICAgIGNhc2UgJ2V0aF9nZXRCbG9ja0J5SGFzaCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2RrLmV0aC5nZXRCbG9ja0J5SGFzaChbcGFyYW1zWzBdLCBwYXJhbXNbMV1dKTtcbiAgICAgICAgICAgIGNhc2UgJ2V0aF9nZXRUcmFuc2FjdGlvbkJ5SGFzaCc6XG4gICAgICAgICAgICAgICAgbGV0IHR4SGFzaCA9IHBhcmFtc1swXTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgdGhpcy5zZGsudHhzLmdldEJ5U2FmZVR4SGFzaCh0eEhhc2gpO1xuICAgICAgICAgICAgICAgICAgICB0eEhhc2ggPSByZXNwLnRyYW5zYWN0aW9uSGFzaCB8fCB0eEhhc2g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cbiAgICAgICAgICAgICAgICAvLyBVc2UgZmFrZSB0cmFuc2FjdGlvbiBpZiB3ZSBkb24ndCBoYXZlIGEgcmVhbCB0eCBoYXNoXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3VibWl0dGVkVHhzLmhhcyh0eEhhc2gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN1Ym1pdHRlZFR4cy5nZXQodHhIYXNoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2RrLmV0aC5nZXRUcmFuc2FjdGlvbkJ5SGFzaChbdHhIYXNoXSkudGhlbigodHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2Ugc2V0IHRoZSB0eCBoYXNoIHRvIHRoZSBvbmUgcmVxdWVzdGVkLCBhcyBzb21lIHByb3ZpZGVyIGFzc2VydCB0aGlzXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHguaGFzaCA9IHBhcmFtc1swXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHg7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXNlICdldGhfZ2V0VHJhbnNhY3Rpb25SZWNlaXB0Jzoge1xuICAgICAgICAgICAgICAgIGxldCB0eEhhc2ggPSBwYXJhbXNbMF07XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHRoaXMuc2RrLnR4cy5nZXRCeVNhZmVUeEhhc2godHhIYXNoKTtcbiAgICAgICAgICAgICAgICAgICAgdHhIYXNoID0gcmVzcC50cmFuc2FjdGlvbkhhc2ggfHwgdHhIYXNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2RrLmV0aC5nZXRUcmFuc2FjdGlvblJlY2VpcHQoW3R4SGFzaF0pLnRoZW4oKHR4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHNldCB0aGUgdHggaGFzaCB0byB0aGUgb25lIHJlcXVlc3RlZCwgYXMgc29tZSBwcm92aWRlciBhc3NlcnQgdGhpc1xuICAgICAgICAgICAgICAgICAgICBpZiAodHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR4LnRyYW5zYWN0aW9uSGFzaCA9IHBhcmFtc1swXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHg7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdldGhfZXN0aW1hdGVHYXMnOiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdldGhfY2FsbCc6IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZGsuZXRoLmNhbGwoW3BhcmFtc1swXSwgcGFyYW1zWzFdXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdldGhfZ2V0TG9ncyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2RrLmV0aC5nZXRQYXN0TG9ncyhbcGFyYW1zWzBdXSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKGBcIiR7cmVxdWVzdC5tZXRob2R9XCIgbm90IGltcGxlbWVudGVkYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gdGhpcyBtZXRob2QgaXMgbmVlZGVkIGZvciBldGhlcnMgdjRcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZXRoZXJzLWlvL2V0aGVycy5qcy9ibG9iLzQyN2UxNjgyNmViMTVkNTJkMjVjNGYwMTAyN2Y4ZGIyMmI3NGI3NmMvc3JjLnRzL3Byb3ZpZGVycy93ZWIzLXByb3ZpZGVyLnRzI0w0MS1MNTVcbiAgICBzZW5kKHJlcXVlc3QsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghcmVxdWVzdClcbiAgICAgICAgICAgIGNhbGxiYWNrKCdVbmRlZmluZWQgcmVxdWVzdCcpO1xuICAgICAgICB0aGlzLnJlcXVlc3QocmVxdWVzdClcbiAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IGNhbGxiYWNrKG51bGwsIHsganNvbnJwYzogJzIuMCcsIGlkOiByZXF1ZXN0LmlkLCByZXN1bHQgfSkpXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjYWxsYmFjayhlcnJvciwgbnVsbCkpO1xuICAgIH1cbn1cbmV4cG9ydHMuU2FmZUFwcFByb3ZpZGVyID0gU2FmZUFwcFByb3ZpZGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXIuanMubWFwIiwiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldExvd2VyQ2FzZSA9IHZvaWQgMDtcbmZ1bmN0aW9uIGdldExvd2VyQ2FzZSh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0cy5nZXRMb3dlckNhc2UgPSBnZXRMb3dlckNhc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xubW9kdWxlLmV4cG9ydHMub25jZSA9IG9uY2U7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG5mdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xuICAgIH1cbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICB9XG59KTtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59O1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XG4gIH1cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBfZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgdmFyIGVyO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICBlciA9IGFyZ3NbMF07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIE5vdGU6IFRoZSBjb21tZW50cyBvbiB0aGUgYHRocm93YCBsaW5lcyBhcmUgaW50ZW50aW9uYWwsIHRoZXkgc2hvd1xuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH1cbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XG4gICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gIH1cblxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcblxuICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XG4gICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAvLyBObyBlcnJvciBjb2RlIGZvciB0aGlzIHNpbmNlIGl0IGlzIGEgV2FybmluZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdCcpO1xuICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICB3LnR5cGUgPSB0eXBlO1xuICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG5cbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIHVud3JhcCA/XG4gICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmdW5jdGlvbiBlcnJvckxpc3RlbmVyKGVycikge1xuICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCByZXNvbHZlcik7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlcigpIHtcbiAgICAgIGlmICh0eXBlb2YgZW1pdHRlci5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgbmFtZSwgcmVzb2x2ZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICBpZiAobmFtZSAhPT0gJ2Vycm9yJykge1xuICAgICAgYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgZXJyb3JMaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGhhbmRsZXIsIGZsYWdzKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5vbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCAnZXJyb3InLCBoYW5kbGVyLCBmbGFncyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIGxpc3RlbmVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgZW1pdHRlci5vbmNlKG5hbWUsIGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdHRlci5vbihuYW1lLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBFdmVudFRhcmdldCBkb2VzIG5vdCBoYXZlIGBlcnJvcmAgZXZlbnQgc2VtYW50aWNzIGxpa2UgTm9kZVxuICAgIC8vIEV2ZW50RW1pdHRlcnMsIHdlIGRvIG5vdCBsaXN0ZW4gZm9yIGBlcnJvcmAgZXZlbnRzIGhlcmUuXG4gICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmN0aW9uIHdyYXBMaXN0ZW5lcihhcmcpIHtcbiAgICAgIC8vIElFIGRvZXMgbm90IGhhdmUgYnVpbHRpbiBgeyBvbmNlOiB0cnVlIH1gIHN1cHBvcnQgc28gd2VcbiAgICAgIC8vIGhhdmUgdG8gZG8gaXQgbWFudWFsbHkuXG4gICAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgd3JhcExpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIGxpc3RlbmVyKGFyZyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwiZW1pdHRlclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBFdmVudEVtaXR0ZXIuIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBlbWl0dGVyKTtcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==